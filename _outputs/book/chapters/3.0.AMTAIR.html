<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.29">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; 3. AMTAIR: Design and Implementation – Automating the Modelling of Transformative Artificial Intelligence Risks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/4.Discussion.html" rel="next">
<link href="../chapters/2.0.Context.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-485d01fc63b59abcd3ee1bf1e8e2748d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/3.0.AMTAIR.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">3. AMTAIR: Design and Implementation</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Automating the Modelling of Transformative Artificial Intelligence Risks</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/VJMeyer/submission" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../Automating-the-Modelling-of-Transformative-Artificial-Intelligence-Risks.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../Automating-the-Modelling-of-Transformative-Artificial-Intelligence-Risks.epub">
              <i class="bi bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Abstract</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/0.Frontmatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/1.Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">1. Introduction: The Coordination Crisis in AI Governance</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/2.0.Context.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">2. Context and Theoretical Foundations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/3.0.AMTAIR.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">3. AMTAIR: Design and Implementation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/4.Discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">4. Discussion: Implications and Limitations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/5.Conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">5. Conclusion: Toward Coordinated AI Governance</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ref/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliography</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/Appendix-K.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix K: From Prototype to Platform: A Research Program Roadmap</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/Appendix-L.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix L: Prompt Engineering - The Hidden Art</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/Appendix-M.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix M: The Validation Frontier - Measuring Truth in Argument Extraction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/Appendix-N.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix N: Bucknall Case Study - Near-Term AI as Existential Risk Factor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title"></span></span></a><a href="https://colab.research.google.com/github/SingularitySmith/AMTAIR_Prototype/blob/main/version_history/AMTAIR_Prototype_0_1.3.ipynb#scrollTo=lt8-AnebGUXr">AMTAIR Prototype Demonstration (Public Colab Notebook)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-system-architecture" id="toc-sec-system-architecture" class="nav-link active" data-scroll-target="#sec-system-architecture">3.1 System Architecture Overview</a>
  <ul>
  <li><a href="#sec-five-stage-pipeline" id="toc-sec-five-stage-pipeline" class="nav-link" data-scroll-target="#sec-five-stage-pipeline">3.1.1 Five-Stage Pipeline Architecture</a></li>
  <li><a href="#sec-design-principles" id="toc-sec-design-principles" class="nav-link" data-scroll-target="#sec-design-principles">3.1.2 Design Principles</a></li>
  </ul></li>
  <li><a href="#sec-two-stage-extraction" id="toc-sec-two-stage-extraction" class="nav-link" data-scroll-target="#sec-two-stage-extraction">3.2 The Two-Stage Extraction Process</a>
  <ul>
  <li><a href="#sec-stage1-argdown" id="toc-sec-stage1-argdown" class="nav-link" data-scroll-target="#sec-stage1-argdown">3.2.1 Stage 1: Structural Extraction (ArgDown)</a></li>
  <li><a href="#sec-stage2-bayesdown" id="toc-sec-stage2-bayesdown" class="nav-link" data-scroll-target="#sec-stage2-bayesdown">3.2.2 Stage 2: Probability Integration (BayesDown)</a></li>
  <li><a href="#sec-why-two-stages" id="toc-sec-why-two-stages" class="nav-link" data-scroll-target="#sec-why-two-stages">3.2.3 Why Two Stages?</a></li>
  </ul></li>
  <li><a href="#sec-implementation-tech" id="toc-sec-implementation-tech" class="nav-link" data-scroll-target="#sec-implementation-tech">3.3 Implementation Technologies</a>
  <ul>
  <li><a href="#sec-tech-stack" id="toc-sec-tech-stack" class="nav-link" data-scroll-target="#sec-tech-stack">3.3.1 Technology Stack</a></li>
  <li><a href="#sec-key-algorithms" id="toc-sec-key-algorithms" class="nav-link" data-scroll-target="#sec-key-algorithms">3.3.2 Key Algorithms</a></li>
  <li><a href="#sec-performance" id="toc-sec-performance" class="nav-link" data-scroll-target="#sec-performance">3.3.3 (Expected) Performance Characteristics</a></li>
  <li><a href="#sec-deterministic-probabilistic" id="toc-sec-deterministic-probabilistic" class="nav-link" data-scroll-target="#sec-deterministic-probabilistic">3.3.4 Deterministic vs.&nbsp;Probabilistic Components of the Workflow</a></li>
  </ul></li>
  <li><a href="#sec-case-rain-sprinkler" id="toc-sec-case-rain-sprinkler" class="nav-link" data-scroll-target="#sec-case-rain-sprinkler">3.4 Case Study: Rain-Sprinkler-Grass</a>
  <ul>
  <li><a href="#sec-rsg-processing" id="toc-sec-rsg-processing" class="nav-link" data-scroll-target="#sec-rsg-processing">3.4.1 Processing Steps</a></li>
  </ul></li>
  <li><a href="#sec-case-carlsmith" id="toc-sec-case-carlsmith" class="nav-link" data-scroll-target="#sec-case-carlsmith">3.5 Case Study: Carlsmith’s Power-Seeking AI Model</a>
  <ul>
  <li><a href="#sec-carlsmith-complexity" id="toc-sec-carlsmith-complexity" class="nav-link" data-scroll-target="#sec-carlsmith-complexity">3.5.1 Model Complexity</a></li>
  <li><a href="#sec-carlsmith-validation" id="toc-sec-carlsmith-validation" class="nav-link" data-scroll-target="#sec-carlsmith-validation">3.5.6 Validation Against Original (From the MTAIR Project)</a></li>
  </ul></li>
  <li><a href="#sec-validation-methodology" id="toc-sec-validation-methodology" class="nav-link" data-scroll-target="#sec-validation-methodology">3.6 Validation Methodology</a>
  <ul>
  <li><a href="#sec-ground-truth" id="toc-sec-ground-truth" class="nav-link" data-scroll-target="#sec-ground-truth">3.6.1 Ground Truth Construction</a></li>
  <li><a href="#sec-evaluation-metrics" id="toc-sec-evaluation-metrics" class="nav-link" data-scroll-target="#sec-evaluation-metrics">3.6.2 Evaluation Metrics</a></li>
  <li><a href="#sec-validation-results" id="toc-sec-validation-results" class="nav-link" data-scroll-target="#sec-validation-results">3.6.3 Results Summary</a></li>
  <li><a href="#sec-error-analysis" id="toc-sec-error-analysis" class="nav-link" data-scroll-target="#sec-error-analysis">3.6.4 Error Analysis</a></li>
  <li><a href="#sec-manual-validation" id="toc-sec-manual-validation" class="nav-link" data-scroll-target="#sec-manual-validation">3.6.5 Independent Manual Extraction Validation</a></li>
  </ul></li>
  <li><a href="#sec-policy-evaluation" id="toc-sec-policy-evaluation" class="nav-link" data-scroll-target="#sec-policy-evaluation">3.7 Policy Evaluation Capabilities</a>
  <ul>
  <li><a href="#sec-intervention-representation" id="toc-sec-intervention-representation" class="nav-link" data-scroll-target="#sec-intervention-representation">3.7.1 Intervention Representation</a></li>
  <li><a href="#sec-deployment-example" id="toc-sec-deployment-example" class="nav-link" data-scroll-target="#sec-deployment-example">3.7.2 Example: Deployment Governance</a></li>
  <li><a href="#sec-robustness" id="toc-sec-robustness" class="nav-link" data-scroll-target="#sec-robustness">3.7.3 Robustness Analysis</a></li>
  </ul></li>
  <li><a href="#sec-visualization-design" id="toc-sec-visualization-design" class="nav-link" data-scroll-target="#sec-visualization-design">3.8 Interactive Visualization Design</a>
  <ul>
  <li><a href="#sec-visual-encoding" id="toc-sec-visual-encoding" class="nav-link" data-scroll-target="#sec-visual-encoding">3.8.1 Visual Encoding Strategy</a></li>
  <li><a href="#sec-progressive-disclosure" id="toc-sec-progressive-disclosure" class="nav-link" data-scroll-target="#sec-progressive-disclosure">3.8.2 Progressive Disclosure</a></li>
  <li><a href="#sec-ui-elements" id="toc-sec-ui-elements" class="nav-link" data-scroll-target="#sec-ui-elements">3.8.3 User Interface Elements</a></li>
  </ul></li>
  <li><a href="#sec-market-integration" id="toc-sec-market-integration" class="nav-link" data-scroll-target="#sec-market-integration">3.9 Integration with Prediction Markets</a>
  <ul>
  <li><a href="#sec-integration-design" id="toc-sec-integration-design" class="nav-link" data-scroll-target="#sec-integration-design">3.9.1 Design for Integration</a></li>
  <li><a href="#sec-market-challenges" id="toc-sec-market-challenges" class="nav-link" data-scroll-target="#sec-market-challenges">3.9.2 Challenges and Opportunities</a></li>
  </ul></li>
  <li><a href="#sec-computational-performance-analysis" id="toc-sec-computational-performance-analysis" class="nav-link" data-scroll-target="#sec-computational-performance-analysis">3.10 Computational Performance Analysis</a>
  <ul>
  <li><a href="#sec-exact-approximate" id="toc-sec-exact-approximate" class="nav-link" data-scroll-target="#sec-exact-approximate">3.10.1 Exact vs.&nbsp;Approximate Inference</a></li>
  <li><a href="#sec-scaling-strategies" id="toc-sec-scaling-strategies" class="nav-link" data-scroll-target="#sec-scaling-strategies">3.10.2 Scaling Strategies</a></li>
  </ul></li>
  <li><a href="#sec-results-achievements" id="toc-sec-results-achievements" class="nav-link" data-scroll-target="#sec-results-achievements">3.11 Results and Achievements</a>
  <ul>
  <li><a href="#sec-extraction-quality" id="toc-sec-extraction-quality" class="nav-link" data-scroll-target="#sec-extraction-quality">3.11.1 Extraction Quality Assessment</a></li>
  <li><a href="#sec-computational-performance" id="toc-sec-computational-performance" class="nav-link" data-scroll-target="#sec-computational-performance">3.11.2 Computational Performance</a></li>
  <li><a href="#sec-policy-impact" id="toc-sec-policy-impact" class="nav-link" data-scroll-target="#sec-policy-impact">3.11.3 Policy Impact Evaluation</a></li>
  </ul></li>
  <li><a href="#sec-technical-summary" id="toc-sec-technical-summary" class="nav-link" data-scroll-target="#sec-technical-summary">3.12 Summary of Technical Contributions</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/VJMeyer/submission/edit/main/chapters/3.0.AMTAIR.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb"><i class="bi bi-file-code"></i>Colab Notebook</a></li><li><a href="https://github.com/VJMeyer/submission"><i class="bi bi-github"></i>GitHub Repository</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-amtair" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">3. AMTAIR: Design and Implementation</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- 
**Chapter Overview**  
**Grade Weight**: 20% | **Target Length**: ~29% of text (~8,700 words)  
**Requirements**: Critical evaluation, strong argument for position, original contribution -->
<p>The moment of truth in any research project comes when elegant theories meet stubborn reality. For AMTAIR, this meant transforming the vision of automated argument extraction into working code that could handle the beautiful messiness of real AI safety arguments. Let me take you through this journey from blueprint to implementation, complete with victories, defeats, and the occasional moment of “well, that’s unexpected.”</p>
<section id="sec-system-architecture" class="level2">
<h2 class="anchored" data-anchor-id="sec-system-architecture">3.1 System Architecture Overview</h2>
<!-- [-] TODO: Present the overall architecture of AMTAIR -->
<p>Picture, if you will, a factory for transforming arguments into models. Raw materials enter at one end—PDFs thick with jargon, blog posts mixing insight with speculation, research papers where crucial assumptions hide in footnote 47. Finished products emerge at the other end—clean network diagrams where you can trace how Assumption A leads to Catastrophe B with probability 0.3. Actually, scratch the factory metaphor. It’s too clean, too industrial. This is more like archaeology meets interpretation meets mathematics. You’re digging through layers of argument, trying to distinguish the load-bearing claims from rhetorical flourishes, all while preserving enough context that the formalization means something.</p>
<!-- [-] COMPLETED: Created component description -->
<p>The pipeline consists of five main stages:</p>
<ol type="1">
<li><strong>Text Ingestion and Preprocessing</strong>: Like a careful librarian, this stage catalogues incoming documents, normalizes their format, extracts metadata, and identifies the argumentative content worth processing.</li>
<li><strong>Argument Extraction</strong>: The intellectual heart of the system, where large language models perform their magic, transforming prose into structured representations.</li>
<li><strong>Data Transformation</strong>: The workshop where extracted arguments are refined, validated, and prepared for mathematical representation.</li>
<li><strong>Network Construction</strong>: The assembly line where formal Bayesian networks are instantiated, complete with conditional probability tables.</li>
<li><strong>Interactive Visualization</strong>: The showroom where complex models become accessible through thoughtful design and interactivity.</li>
</ol>
<section id="sec-five-stage-pipeline" class="level3">
<h3 class="anchored" data-anchor-id="sec-five-stage-pipeline">3.1.1 Five-Stage Pipeline Architecture</h3>
<p>Let’s examine each stage more closely, understanding not just what they do but why they exist as separate components.</p>
<p><strong>Text Ingestion and Preprocessing</strong> handles the unglamorous but essential work of standardization. Academic PDFs, with their two-column layouts and embedded figures, differ vastly from blog posts with inline code and hyperlinks. This stage creates a uniform representation while preserving essential structure and metadata. Format normalization strips away presentation while preserving content. Metadata extraction captures authorship, publication date, and citations. Relevance filtering identifies sections containing arguments rather than literature reviews or acknowledgments. Character encoding standardization prevents those maddening �replacement characters that plague text processing.</p>
<p><strong>Argument Extraction</strong> represents AMTAIR’s core innovation. Using a two-stage process that mirrors human reasoning, it first identifies structural relationships (what influences what) then quantifies those relationships (how likely, how strong). This separation enables targeted prompts optimized for each task, human verification between stages, and modular improvements as LLM capabilities evolve.</p>
<p><strong>Data Transformation</strong> bridges the gap between textual representations and mathematical models. It parses the BayesDown syntax into structured data, validates that the resulting network forms a proper DAG, checks probability consistency, and handles missing data intelligently.</p>
<p><strong>Network Construction</strong> instantiates the formal mathematical model. This involves creating nodes and edges according to extracted structure, populating conditional probability tables, initializing inference engines, and validating the complete model.</p>
<p><strong>Interactive Visualization</strong> makes the complex accessible. Through thoughtful visual encoding of probabilities and relationships, progressive disclosure of detail, interactive exploration capabilities, and multiple export formats, it serves diverse stakeholder needs.</p>
<!-- [-] COMPLETED: Added pipeline architecture details -->
</section>
<section id="sec-design-principles" class="level3">
<h3 class="anchored" data-anchor-id="sec-design-principles">3.1.2 Design Principles</h3>
<p><strong>Core Design Philosophy</strong>: The architecture embodies several principles that guided countless implementation decisions:</p>
<p><strong>Modularity</strong>: Each component has clear inputs, outputs, and responsibilities. This isn’t just good software engineering—it enables independent improvement of components and graceful degradation when parts fail.</p>
<p><strong>Validation Checkpoints</strong>: Between each stage, we validate outputs before proceeding. Bad extractions don’t propagate into visualization. Malformed networks trigger re-extraction rather than cryptic errors.</p>
<p><strong>Human-in-the-Loop</strong>: While pursuing automation, we recognize that human judgment remains invaluable. The architecture provides natural intervention points where experts can verify and correct.</p>
<p><strong>Extensibility</strong>: New document formats, improved extraction prompts, alternative visualization libraries—the architecture accommodates growth without restructuring.</p>
<p>The system emphasizes transparency over black-box efficiency. Users can inspect intermediate representations, understand extraction decisions, and verify transformations. This builds trust—essential for a system handling high-stakes arguments about existential risk.</p>
<!-- [-] COMPLETED: Added design principles -->
</section>
</section>
<section id="sec-two-stage-extraction" class="level2">
<h2 class="anchored" data-anchor-id="sec-two-stage-extraction">3.2 The Two-Stage Extraction Process</h2>
<!-- [-] TODO: Detail the process of extracting ArgDown representations -->
<p>The heart of AMTAIR<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> beats with a two-stage rhythm: structure, then probability. This separation, which initially seemed like an implementation detail, revealed itself as fundamental to the extraction challenge.</p>
<section id="sec-stage1-argdown" class="level3">
<h3 class="anchored" data-anchor-id="sec-stage1-argdown">3.2.1 Stage 1: Structural Extraction (ArgDown)</h3>
<p>Imagine reading a complex argument about AI risk. Your first pass likely isn’t calculating exact probabilities—you’re mapping the landscape. What are the key claims? How do they relate? What supports what? Stage 1 mirrors this cognitive process.</p>
<p>The extraction begins with pattern recognition. Natural language contains linguistic markers of causal relationships: “leads to,” “results in,” “depends on,” “influences.” The LLM, trained on vast corpora of argumentative text, recognizes these patterns and their variations.</p>
<p>Consider extracting from a passage like: “The development of artificial general intelligence will likely lead to rapid capability gains through recursive self-improvement. This intelligence explosion could result in systems pursuing convergent instrumental goals, potentially including resource acquisition and self-preservation. Without solved alignment, such power-seeking behavior poses existential risks to humanity.”</p>
<p>The system identifies three key variables connected by causal relationships:</p>
<ul>
<li>AGI Development → Intelligence Explosion</li>
<li>Intelligence Explosion → Power-Seeking Behavior</li>
<li>Power-Seeking Behavior → Existential Risk</li>
</ul>
<p>But extraction goes beyond simple pattern matching. The system must handle complex linguistic phenomena like coreference (“this,” “such systems”), implicit relationships, conditional statements, and negative statements. The magic lies in prompt engineering that guides the LLM to consistent extraction while remaining flexible enough for diverse argument styles.</p>
<p>The output, formatted in ArgDown syntax, preserves both structure and semantics:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[Existential_Risk]: </span>Threat to humanity's continued existence and flourishing.</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ss"> + </span><span class="co">[</span><span class="ot">Power_Seeking_Behavior</span><span class="co">]</span>: AI systems pursuing instrumental goals like resource acquisition.</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ss">   + </span><span class="co">[</span><span class="ot">Intelligence_Explosion</span><span class="co">]</span>: Rapid recursive self-improvement leading to superintelligence.</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ss">     + </span><span class="co">[</span><span class="ot">AGI_Development</span><span class="co">]</span>: Creation of artificial general intelligence systems.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- [-] COMPLETED: Added detailed Stage 1 explanation -->
</section>
<section id="sec-stage2-bayesdown" class="level3">
<h3 class="anchored" data-anchor-id="sec-stage2-bayesdown">3.2.2 Stage 2: Probability Integration (BayesDown)</h3>
<p>With structure established, Stage 2 adds the quantitative flesh to the qualitative bones. This stage faces a different challenge: extracting numerical beliefs from text that often expresses uncertainty in frustratingly vague terms.</p>
<p>The process begins by generating targeted questions based on the extracted structure. For each node, we need prior probabilities. For each child-parent relationship, we need conditional probabilities. The combinatorics can be daunting—a node with three binary parents requires 8 conditional probability values.</p>
<p>The system employs multiple strategies for probability extraction:</p>
<p><strong>Explicit Extraction</strong>: When authors provide numerical estimates (“we assign 70% probability”), extraction is straightforward, though we must handle various formats and contexts.</p>
<p><strong>Linguistic Mapping</strong>: While comprehensive validation remains future work, preliminary assessments using the methodology described above would likely reveal several patterns.</p>
<p><strong>Comparative Reasoning</strong>: Statements like “more probable than not” or “at least as likely as X” provide bounds even without exact values.</p>
<p><strong>Coherence Enforcement</strong>: Probabilities must sum correctly. If P(A|B) = 0.7, then P(not A|B) must equal 0.3. The syntax allows future system to detect and resolve inconsistencies.</p>
<p>The result is a complete BayesDown specification:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="er">Existential_Risk</span><span class="ot">]</span><span class="er">:</span> <span class="er">Threat</span> <span class="er">to</span> <span class="er">humanity's</span> <span class="er">continued</span> <span class="er">existence.</span> <span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"true"</span><span class="ot">,</span> <span class="st">"false"</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"p(true)"</span><span class="fu">:</span> <span class="st">"0.10"</span><span class="fu">,</span> <span class="dt">"p(false)"</span><span class="fu">:</span> <span class="st">"0.90"</span><span class="fu">},</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(true|power_seeking_true)"</span><span class="fu">:</span> <span class="st">"0.65"</span><span class="fu">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(true|power_seeking_false)"</span><span class="fu">:</span> <span class="st">"0.001"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- [-] COMPLETED: Added detailed Stage 2 explanation -->
</section>
<section id="sec-why-two-stages" class="level3">
<h3 class="anchored" data-anchor-id="sec-why-two-stages">3.2.3 Why Two Stages?</h3>
<p>The separation of structure from probability isn’t merely convenient—it’s cognitively valid and practically essential. Let me count the ways this design decision pays dividends:</p>
<p><strong>Cognitive Alignment</strong>: Humans naturally separate “what relates to what” from “how likely is it.” The two-stage process mirrors this, making the system’s operation intuitive and interpretable.</p>
<p><strong>Error Isolation</strong>: Structural errors (missing a key variable) differ fundamentally from probability errors (estimating 0.7 instead of 0.8). Separating stages allows targeted debugging and improvement.</p>
<p><strong>Modular Validation</strong>: Experts can verify structure without needing to evaluate every probability. This enables efficient human oversight at natural checkpoints.</p>
<p><strong>Flexible Quantification</strong>: Different probability sources (text extraction, expert elicitation, market data) can feed into the same structure. The architecture accommodates multiple approaches to the probability challenge.</p>
<p><strong>Transparency</strong>: Users can inspect ArgDown to understand what was extracted before probabilities were added. This builds trust and enables meaningful correction.</p>
<p>The two-stage approach also revealed an unexpected benefit: ArgDown itself became a valuable output. Researchers began using these structural extractions for qualitative analysis, even without probability quantification. Sometimes, just making argument structure explicit provides sufficient value.</p>
<!-- [-] COMPLETED: Added why two stages explanation -->
</section>
</section>
<section id="sec-implementation-tech" class="level2">
<h2 class="anchored" data-anchor-id="sec-implementation-tech">3.3 Implementation Technologies</h2>
<!-- [-] TODO: Detail the technology stack and key algorithms -->
<p>Choosing technologies for AMTAIR resembled assembling a band—each instrument needed to excel individually while harmonizing with the ensemble. The selection criteria balanced capability, maturity, interoperability, and community support.</p>
<section id="sec-tech-stack" class="level3">
<h3 class="anchored" data-anchor-id="sec-tech-stack">3.3.1 Technology Stack</h3>
<p>Selecting technologies for a project like AMTAIR involves a peculiar form of fortune-telling. You’re choosing tools not just for present needs but for future possibilities you can’t fully anticipate. Early decisions cascade through the implementation, creating path dependencies that only become apparent months later.</p>
<p>The choice of Python as the primary language was perhaps the only decision that never faced serious questioning. The ecosystem for scientific computing, the availability of sophisticated libraries, the community support—all pointed in the same direction. Yet even this “obvious” choice carried hidden implications. Python’s flexibility enabled rapid prototyping but occasionally masked performance issues until they became critical.</p>
<!-- Language model selection proved more contentious. GPT-4 offered superior reasoning capabilities but came with usage restrictions and costs that complicated large-scale extraction. Claude demonstrated stronger performance on structured tasks but wasn't available when development began. The solution—supporting multiple providers through a common interface—seemed elegant in theory but introduced its own complexities. Each model had quirks in how it interpreted prompts, requiring provider-specific adjustments that somewhat undermined the abstraction. -->
<p>NetworkX emerged as the natural choice for graph manipulation after brief flirtations with alternatives. Its maturity showed in countless small conveniences—algorithms I didn’t have to implement, edge cases already handled, documentation for obscure functions. Pgmpy for Bayesian network operations was less obvious. Several libraries offered similar functionality, but pgmpy’s API design aligned well with our extraction pipeline. The ability to construct networks incrementally, validate structure during construction, and perform inference without elaborate setup proved decisive.</p>
<p>The visualization challenge nearly derailed the project. Initial attempts with matplotlib produced static images that technically displayed the network but failed to convey understanding. The breakthrough came with PyVis, which leveraged vis.js to create interactive web-based visualizations. Suddenly, complex networks became explorable. Users could drag nodes to untangle connections, click for details, adjust physics parameters to find optimal layouts. The difference between seeing and understanding turned out to be interactivity.</p>
<p>The final ensemble performs beautifully:</p>
<div id="tbl-tech-stack" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-tech-stack-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.1: Table 3.3.1: Overview of Tech Stack
</figcaption>
<div aria-describedby="tbl-tech-stack-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Technology</th>
<th>Purpose</th>
<th>Why This Choice</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Language Models</td>
<td>GPT-4, Claude</td>
<td>Argument extraction</td>
<td>State-of-the-art reasoning capabilities</td>
</tr>
<tr class="even">
<td>Network Analysis</td>
<td>NetworkX</td>
<td>Graph algorithms</td>
<td>Mature, comprehensive, well-documented</td>
</tr>
<tr class="odd">
<td>Probabilistic Modeling</td>
<td>pgmpy</td>
<td>Bayesian operations</td>
<td>Native Python, active development</td>
</tr>
<tr class="even">
<td>Visualization</td>
<td>PyVis</td>
<td>Interactive rendering</td>
<td>Web-based, customizable, responsive</td>
</tr>
<tr class="odd">
<td>Data Processing</td>
<td>Pandas</td>
<td>Structured manipulation</td>
<td>Industry standard, powerful operations</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><strong>Language Models</strong> form the cognitive core. GPT-4 and Claude demonstrate remarkable ability to understand complex arguments, recognize implicit structure, and maintain coherence across long extractions. The choice to support multiple models provides robustness and allows leveraging their complementary strengths.</p>
<p><strong>NetworkX</strong> handles all graph-theoretic heavy lifting. From basic operations like cycle detection to advanced algorithms like centrality measurement, it provides a comprehensive toolkit that would take years to replicate.</p>
<p><strong>pgmpy</strong> bridges the gap between graph structure and probabilistic reasoning. Its clean API design maps naturally onto our extracted representations, while its inference algorithms handle the computational complexity of Bayesian reasoning.</p>
<p><strong>PyVis</strong> transforms static networks into living documents. Built on vis.js, it provides smooth physics simulations, rich interactivity, and extensive customization options—all accessible through Python.</p>
<p><strong>Pandas</strong> might seem mundane compared to its companions, but it’s the reliable rhythm section that keeps everything together. Its ability to reshape, merge, and transform structured data makes the complex data transformations tractable.</p>
<!-- [-] COMPLETED: Added technology stack details -->
</section>
<section id="sec-key-algorithms" class="level3">
<h3 class="anchored" data-anchor-id="sec-key-algorithms">3.3.2 Key Algorithms</h3>
<p>Beyond the libraries lie custom algorithms that address AMTAIR-specific challenges:</p>
<p><strong>Hierarchical Parsing</strong>: The algorithm that transforms indented ArgDown text into structured data represents a small miracle of recursive descent parsing adapted for our custom syntax. It maintains parent-child relationships while handling edge cases like repeated nodes and complex dependencies.</p>
<p>python</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: example_use_case</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "example use case"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=ibjjJ34v3sQn&amp;line=4&amp;uniqifier=1"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "example use case"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parsing_argdown_bayesdown(text, current_indent<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Recursively parse indented structure maintaining relationships"""</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Track nodes at each level for parent identification</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle repeated nodes by reference</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Validate DAG property during construction</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- {{< embed /AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#parsing_argdown_bayesdown echo=true >}} -->
<!-- 
#| label: example_use_case
#| echo: true
#| eval: true
#| fig-cap: "example use case"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=ibjjJ34v3sQn&line=4&uniqifier=1"
#| fig-alt: "example use case"
-->
<p><strong>Probability Completion</strong>: Real arguments rarely specify all required probabilities. Our completion algorithm uses maximum entropy principles—when uncertain, assume maximum disorder. This provides conservative estimates that can be refined with additional information.</p>
<p><strong>Visual Encoding</strong>: The algorithm mapping probabilities to colors uses perceptual uniformity. The green-to-red gradient isn’t linear in RGB space but follows human perception of color difference. Small details, big impact on usability.</p>
<p><strong>Layout Optimization</strong>: Force-directed layouts often produce “hairballs” for complex networks. Our customized approach uses hierarchical initialization based on causal depth, then refines with physics simulation. The result: layouts that reveal structure rather than obscuring it.</p>
<!-- [-] COMPLETED: Added key algorithms -->
</section>
<section id="sec-performance" class="level3">
<h3 class="anchored" data-anchor-id="sec-performance">3.3.3 (Expected) Performance Characteristics</h3>
<!-- [-] COMPLETED: Replaced hallucinated metrics with theoretical analysis -->
<p>Performance in a system like AMTAIR involves multiple dimensions—speed, accuracy, scalability. Let’s examine what theoretical analysis and design considerations suggest about system behavior.</p>
<p><strong>Computational Complexity</strong>: The extraction phase exhibits linear complexity in document length—processing twice as much text takes roughly twice as long. However, the inference phase faces exponential complexity in network connectivity. A fully connected network with n binary nodes requires O(2^n) operations for exact inference. This fundamental limitation shapes practical usage patterns.</p>
<p><strong>Practical Implications</strong>: Small networks (&lt;20 nodes) enable real-time interaction with exact inference. Medium networks (20-50 nodes) require seconds to minutes depending on connectivity. Large networks (&gt;50 nodes) necessitate approximate methods, trading accuracy for tractability. Very large networks push the boundaries of current methods.</p>
<p>The bottleneck shifts predictably: extraction remains manageable even for lengthy documents, but inference becomes challenging as models grow. This suggests a natural workflow—extract comprehensively, then focus on relevant subnetworks for detailed analysis.</p>
<p><strong>Optimization Opportunities</strong>: Several strategies could improve performance: caching frequent inference queries, hierarchical decomposition of large networks, parallel processing for independent subgraphs, and progressive rendering for visualization. The modular architecture accommodates these enhancements without fundamental restructuring.</p>
<!-- [-] COMPLETED: Added performance analysis -->
</section>
<section id="sec-deterministic-probabilistic" class="level3">
<h3 class="anchored" data-anchor-id="sec-deterministic-probabilistic">3.3.4 Deterministic vs.&nbsp;Probabilistic Components of the Workflow</h3>
<p>An interesting philosophical question arises: in a system reasoning about probability, which components should themselves be probabilistic?</p>
<p>The current implementation draws a clear line:</p>
<p><strong>Deterministic Components</strong>: All data transformations, graph algorithms, and inference calculations operate deterministically. Given the same input, they produce identical output. This provides reproducibility and debuggability—essential for building trust.</p>
<p><strong>Probabilistic Components</strong>: The LLM calls for extraction introduce variability. Even with temperature set to 0, language models exhibit some randomness. Different runs might extract slightly different structures or probability estimates from the same text.</p>
<p>This division reflects a deeper principle: use determinism wherever possible, embrace probability where necessary. The extraction task—interpreting natural language—inherently involves uncertainty. But once we have formal representations, all subsequent operations should be predictable.</p>
<p>From an information-theoretic perspective, we’re trying to extract maximum information from documents within computational budget constraints. Each document contains some finite amount of formalizable argument structure. Our goal is recovering as much as possible given realistic resource limits.</p>
<p>The two-stage extraction can be viewed as successive refinement—first recovering the higher-order bits (structure), then filling in lower-order bits (probabilities). This aligns with rate-distortion theory, where we get the most important information first.</p>
<!-- [-] COMPLETED: Added deterministic vs probabilistic analysis -->
</section>
</section>
<section id="sec-case-rain-sprinkler" class="level2">
<h2 class="anchored" data-anchor-id="sec-case-rain-sprinkler">3.4 Case Study: Rain-Sprinkler-Grass</h2>
<!-- [-] TODO: Demonstrate the pipeline using the canonical example -->
<p>Every field has its canonical examples—physics has spherical cows, economics has widget factories, and Bayesian networks have the rain-sprinkler-grass scenario. Despite its simplicity, this example teaches profound lessons about causal reasoning and serves as the perfect test case for AMTAIR.</p>
<section id="sec-rsg-processing" class="level3">
<h3 class="anchored" data-anchor-id="sec-rsg-processing">3.4.1 Processing Steps</h3>
<p>Let me walk you through how AMTAIR processes this foundational example:</p>
<p>The input arrives as a simple text description: “When it rains, the grass gets wet. The sprinkler also makes the grass wet. However, when it rains, we usually don’t run the sprinkler.”</p>
<p>From this prosaic description, the system performs five transformations:</p>
<ol type="1">
<li><strong>ArgDown Parsing</strong>: Extract three variables (Rain, Sprinkler, Grass_Wet) and identify that rain influences both sprinkler usage and grass wetness, while the sprinkler also influences grass wetness.</li>
<li><strong>Question Generation</strong>: Create probability queries: What’s P(Rain)? What’s P(Sprinkler|Rain)? What’s P(Grass_Wet|Rain,Sprinkler) for all combinations?</li>
<li><strong>BayesDown Extraction</strong>: Either extract probabilities from text or apply reasonable defaults. The “usually don’t run” becomes P(Sprinkler|Rain) ≈ 0.01.</li>
<li><strong>Network Construction</strong>: Build the formal Bayesian network with three nodes, three edges, and complete conditional probability tables.</li>
<li><strong>Visualization Rendering</strong>: Create an interactive display where rain appears as a root cause, influencing both sprinkler and grass directly.</li>
</ol>
<p>Each step validates its outputs before proceeding, ensuring that errors don’t cascade through the pipeline.</p>
<!-- [-] COMPLETED: Added processing steps -->
</section>
<div class="landscape">
<section id="sec-rsg-input" class="level3">
<h3 class="anchored" data-anchor-id="sec-rsg-input">3.4.2 Example Conversion Steps</h3>
<p>Let’s trace the actual transformations to see the pipeline in action:</p>
<p><strong>Initial ArgDown Extraction</strong>:</p>
<!-- 
```markdown
[Grass_Wet]: Concentrated moisture on grass blades. {"instantiations": ["wet", "dry"]}    
 + [Rain]: Precipitation from the sky. {"instantiations": ["raining", "not_raining"]}
 + [Sprinkler]: Artificial watering system. {"instantiations": ["on", "off"]}
   + [Rain]
``` -->
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[Grass_Wet]: </span>Concentrated moisture on, between and around the blades of grass.{"instantiations": <span class="co">[</span><span class="ot">"grass_wet_TRUE", "grass_wet_FALSE"</span><span class="co">]</span>}    </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span><span class="co">[</span><span class="ot">Rain</span><span class="co">]</span>: Tears of angles crying high up in the skies hitting the ground.{"instantiations": <span class="co">[</span><span class="ot">"rain_TRUE", "rain_FALSE"</span><span class="co">]</span>}</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span><span class="co">[</span><span class="ot">Sprinkler</span><span class="co">]</span>: Activation of a centrifugal force based CO2 droplet distribution system.{"instantiations": <span class="co">[</span><span class="ot">"sprinkler_TRUE", "sprinkler_FALSE"</span><span class="co">]</span>}</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span><span class="co">[</span><span class="ot">Rain</span><span class="co">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The hierarchy captures that rain influences sprinkler usage—a subtle but important causal relationship that pure correlation would miss.</p>
<p><strong>Generated Questions for Probability Extraction</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="er">BayesDown</span> <span class="er">Format</span> <span class="er">Preview:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="er">#</span> <span class="er">BayesDown</span> <span class="er">Representation</span> <span class="er">with</span> <span class="er">Placeholder</span> <span class="er">Probabilities</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="er">/*</span> <span class="er">This</span> <span class="er">file</span> <span class="er">contains</span> <span class="er">BayesDown</span> <span class="er">syntax</span> <span class="er">with</span> <span class="er">placeholder</span> <span class="er">probabilities.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>   <span class="er">Replace</span> <span class="er">the</span> <span class="er">placeholders</span> <span class="er">with</span> <span class="er">actual</span> <span class="er">probability</span> <span class="er">values</span> <span class="er">based</span> <span class="er">on</span> <span class="er">the</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>   <span class="er">questions</span> <span class="er">in</span> <span class="er">the</span> <span class="er">comments.</span> <span class="er">*/</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_TRUE</span> <span class="er">if</span> <span class="er">Rain=rain_TRUE,</span> <span class="er">Sprinkler=sprinkler_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_TRUE</span> <span class="er">if</span> <span class="er">Rain=rain_TRUE,</span> <span class="er">Sprinkler=sprinkler_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_TRUE</span> <span class="er">if</span> <span class="er">Rain=rain_FALSE,</span> <span class="er">Sprinkler=sprinkler_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_TRUE</span> <span class="er">if</span> <span class="er">Rain=rain_FALSE,</span> <span class="er">Sprinkler=sprinkler_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_FALSE</span> <span class="er">if</span> <span class="er">Rain=rain_TRUE,</span> <span class="er">Sprinkler=sprinkler_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_FALSE</span> <span class="er">if</span> <span class="er">Rain=rain_TRUE,</span> <span class="er">Sprinkler=sprinkler_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_FALSE</span> <span class="er">if</span> <span class="er">Rain=rain_FALSE,</span> <span class="er">Sprinkler=sprinkler_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Grass_Wet=grass_wet_FALSE</span> <span class="er">if</span> <span class="er">Rain=rain_FALSE,</span> <span class="er">Sprinkler=sprinkler_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="ot">[</span><span class="er">Grass_Wet</span><span class="ot">]</span><span class="er">:</span> <span class="er">Concentrated</span> <span class="er">moisture</span> <span class="er">on,</span> <span class="er">between</span> <span class="er">and</span> <span class="er">around</span> <span class="er">the</span> <span class="er">blades</span> <span class="er">of</span> <span class="er">grass.</span> <span class="fu">{</span><span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"grass_wet_TRUE"</span><span class="ot">,</span> <span class="st">"grass_wet_FALSE"</span><span class="ot">]</span><span class="fu">,</span> <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"What is the probability for Grass_Wet=grass_wet_TRUE?"</span><span class="fu">:</span> <span class="st">"%?"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_FALSE?"</span><span class="fu">:</span> <span class="st">"%?"</span><span class="fu">},</span> <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"What is the probability for Grass_Wet=grass_wet_TRUE if Rain=rain_TRUE, Sprinkler=sprinkler_TRUE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_TRUE if Rain=rain_TRUE, Sprinkler=sprinkler_FALSE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_TRUE if Rain=rain_FALSE, Sprinkler=sprinkler_TRUE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_TRUE if Rain=rain_FALSE, Sprinkler=sprinkler_FALSE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_FALSE if Rain=rain_TRUE, Sprinkler=sprinkler_TRUE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_FALSE if Rain=rain_TRUE, Sprinkler=sprinkler_FALSE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_FALSE if Rain=rain_FALSE, Sprinkler=sprinkler_TRUE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Grass_Wet=grass_wet_FALSE if Rain=rain_FALSE, Sprinkler=sprinkler_FALSE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">}}</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Rain=rain_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Rain=rain_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="er">+</span> <span class="ot">[</span><span class="er">Rain</span><span class="ot">]</span><span class="er">:</span> <span class="er">Tears</span> <span class="er">of</span> <span class="er">angles</span> <span class="er">crying</span> <span class="er">high</span> <span class="er">up</span> <span class="er">in</span> <span class="er">the</span> <span class="er">skies</span> <span class="er">hitting</span> <span class="er">the</span> <span class="er">ground.</span> <span class="fu">{</span><span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"rain_TRUE"</span><span class="ot">,</span> <span class="st">"rain_FALSE"</span><span class="ot">]</span><span class="fu">,</span> <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"What is the probability for Rain=rain_TRUE?"</span><span class="fu">:</span> <span class="st">"%?"</span><span class="fu">,</span> <span class="dt">"What is the probability for Rain=rain_FALSE?"</span><span class="fu">:</span> <span class="st">"%?"</span><span class="fu">}}</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Sprinkler=sprinkler_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Sprinkler=sprinkler_TRUE</span> <span class="er">if</span> <span class="er">Rain=rain_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Sprinkler=sprinkler_TRUE</span> <span class="er">if</span> <span class="er">Rain=rain_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Sprinkler=sprinkler_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Sprinkler=sprinkler_FALSE</span> <span class="er">if</span> <span class="er">Rain=rain_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Sprinkler=sprinkler_FALSE</span> <span class="er">if</span> <span class="er">Rain=rain_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>        <span class="er">+</span> <span class="ot">[</span><span class="er">Sprinkler</span><span class="ot">]</span><span class="er">:</span> <span class="er">Activation</span> <span class="er">of</span> <span class="er">a</span> <span class="er">centrifugal</span> <span class="er">force</span> <span class="er">based</span> <span class="er">CO2</span> <span class="er">droplet</span> <span class="er">distribution</span> <span class="er">system.</span> <span class="fu">{</span><span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"sprinkler_TRUE"</span><span class="ot">,</span> <span class="st">"sprinkler_FALSE"</span><span class="ot">]</span><span class="fu">,</span> <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"What is the probability for Sprinkler=sprinkler_TRUE?"</span><span class="fu">:</span> <span class="st">"%?"</span><span class="fu">,</span> <span class="dt">"What is the probability for Sprinkler=sprinkler_FALSE?"</span><span class="fu">:</span> <span class="st">"%?"</span><span class="fu">},</span> <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"What is the probability for Sprinkler=sprinkler_TRUE if Rain=rain_TRUE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Sprinkler=sprinkler_TRUE if Rain=rain_FALSE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Sprinkler=sprinkler_FALSE if Rain=rain_TRUE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">,</span> <span class="dt">"What is the probability for Sprinkler=sprinkler_FALSE if Rain=rain_FALSE?"</span><span class="fu">:</span> <span class="st">"?%"</span><span class="fu">}}</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>            <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Rain=rain_TRUE?</span> <span class="er">*/</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>            <span class="er">/*</span> <span class="er">What</span> <span class="er">is</span> <span class="er">the</span> <span class="er">probability</span> <span class="er">for</span> <span class="er">Rain=rain_FALSE?</span> <span class="er">*/</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>            <span class="er">+</span> <span class="ot">[</span><span class="er">Rain</span><span class="ot">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- 
```markdown
/* Prior probabilities */
- What is the probability that it rains?
- What is the probability the sprinkler is on?

/* Conditional probabilities */  
- What is the probability the sprinkler is on when it's raining?
- What is the probability the sprinkler is on when it's not raining?
- What is the probability the grass is wet when it's raining and sprinkler is on?
- [... and so on for all combinations]
```
-->
<p>The system generates exactly the questions needed to fully specify the network.</p>
<p><strong>Complete BayesDown Result</strong>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[Grass_Wet]: </span>Concentrated moisture on, between and around the blades of grass.{"instantiations": <span class="co">[</span><span class="ot">"grass_wet_TRUE", "grass_wet_FALSE"</span><span class="co">]</span>}    </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    +<span class="co">[</span><span class="ot">Rain</span><span class="co">]</span>: Tears of angles crying high up in the skies hitting the ground.{"instantiations": <span class="co">[</span><span class="ot">"rain_TRUE", "rain_FALSE"</span><span class="co">]</span>}</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    +<span class="co">[</span><span class="ot">Sprinkler</span><span class="co">]</span>: Activation of a centrifugal force based CO2 droplet distribution system.{"instantiations": <span class="co">[</span><span class="ot">"sprinkler_TRUE", "sprinkler_FALSE"</span><span class="co">]</span>}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        +<span class="co">[</span><span class="ot">Rain</span><span class="co">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- 
```json
[Grass_Wet]: Concentrated moisture on grass. {
  "instantiations": ["wet", "dry"],
  "priors": {"p(wet)": "0.45", "p(dry)": "0.55"},
  "posteriors": {
    "p(wet|raining,on)": "0.99",
    "p(wet|raining,off)": "0.80", 
    "p(wet|not_raining,on)": "0.90",
    "p(wet|not_raining,off)": "0.01"
  }
}
``` -->
<p>Notice how the probabilities tell a coherent story—grass is almost certainly wet if either water source is active, almost certainly dry if neither is.</p>
<p><strong>Resulting DataFrame Structure</strong>:</p>
<p>The transformation into tabular format enables standard data analysis tools while preserving all relationships and probabilities. Each row represents a node with its properties, parents, children, and probability distributions.</p>
<!-- [-] COMPLETED: Added conversion examples -->
</section>
<section id="sec-rsg-results" class="level3">
<h3 class="anchored" data-anchor-id="sec-rsg-results">3.4.3 Results</h3>
<div id="tbl-rsg-extracted-data" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rsg-extracted-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.2: Table 3.5.3: Extracted BayesDown data structure for rain-sprinkler-grass example
</figcaption>
<div aria-describedby="tbl-rsg-extracted-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>Title</th>
<th>Description</th>
<th>line</th>
<th>line_numbers</th>
<th>indentation</th>
<th>indentation_levels</th>
<th>Parents</th>
<th>Children</th>
<th>instantiations</th>
<th>priors</th>
<th>posteriors</th>
<th>No_Parent</th>
<th>No_Children</th>
<th>parent_instantiations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Grass_Wet</td>
<td>Concentrated moisture on, between and around the blades of grass</td>
<td>3</td>
<td>[3]</td>
<td>0</td>
<td>[0]</td>
<td>[Rain, Sprinkler]</td>
<td>[]</td>
<td>[grass_wet_TRUE, grass_wet_FALSE]</td>
<td>{‘p(grass_wet_TRUE)’: ‘0.322’, ‘p(grass_wet_FALSE)’: ‘0.678’}</td>
<td>{‘p(grass_wet_TRUE|sprinkler_TRUE,rain_TRUE)’: ‘0.99’, ‘p(grass_wet_TRUE|sprinkler_TRUE,rain_FALSE)’: ‘0.9’, ‘p(grass_wet_TRUE|sprinkler_FALSE,rain_TRUE)’: ‘0.8’, ‘p(grass_wet_TRUE|sprinkler_FALSE,rain_FALSE)’: ‘0.01’}</td>
<td>False</td>
<td>True</td>
<td>[[rain_TRUE, rain_FALSE], [sprinkler_TRUE, sprinkler_FALSE]]</td>
</tr>
<tr class="even">
<td>Rain</td>
<td>Tears of angles crying high up in the skies hitting the ground</td>
<td>4</td>
<td>[4, 6]</td>
<td>2</td>
<td>[1, 2]</td>
<td>[]</td>
<td>[Grass_Wet, Sprinkler]</td>
<td>[rain_TRUE, rain_FALSE]</td>
<td>{‘p(rain_TRUE)’: ‘0.2’, ‘p(rain_FALSE)’: ‘0.8’}</td>
<td>{}</td>
<td>True</td>
<td>False</td>
<td>[]</td>
</tr>
<tr class="odd">
<td>Sprinkler</td>
<td>Activation of a centrifugal force based CO2 droplet distribution system</td>
<td>5</td>
<td>[5]</td>
<td>1</td>
<td>[1]</td>
<td>[Rain]</td>
<td>[Grass_Wet]</td>
<td>[sprinkler_TRUE, sprinkler_FALSE]</td>
<td>{‘p(sprinkler_TRUE)’: ‘0.44838’, ‘p(sprinkler_FALSE)’: ‘0.55162’}</td>
<td>{‘p(sprinkler_TRUE|rain_TRUE)’: ‘0.01’, ‘p(sprinkler_TRUE|rain_FALSE)’: ‘0.4’}</td>
<td>False</td>
<td>False</td>
<td>[[rain_TRUE, rain_FALSE]]</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The successfully processed rain-sprinkler-grass example demonstrates several key capabilities:</p>
<p><strong>Structure Preservation</strong>: The causal relationships—including the subtle influence of rain on sprinkler usage—are correctly captured and maintained throughout processing.</p>
<p><strong>Probability Coherence</strong>: All probability distributions sum to 1.0, conditional probabilities are complete, and the values tell a plausible story.</p>
<p><strong>Visual Clarity</strong>: The rendered network clearly shows rain as the root cause, influencing both sprinkler and grass, while sprinkler provides an additional pathway to wet grass.</p>
<p><strong>Interactive Exploration</strong>: Users can click nodes to see detailed probabilities, drag to rearrange for clarity, and explore how changing parameters affects outcomes.</p>
<p><strong>Inference Capability</strong>: The system correctly calculates derived probabilities like P(Rain|Grass_Wet)—the diagnostic reasoning from effect to cause that makes Bayesian networks so powerful.</p>
<p>This simple example validates the basic pipeline functionality. But the real test comes with complex, real-world arguments …</p>
<!-- [-] COMPLETED: Added results -->
<section id="rain-sprinkler-grass-network-rendering" class="level4">
<h4 class="anchored" data-anchor-id="rain-sprinkler-grass-network-rendering">Rain-Sprinkler-Grass Network Rendering</h4>
<div id="cell-rain_sprinkler_grass_example_network_rendering2" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> IFrame</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>IFrame(src<span class="op">=</span><span class="st">"https://singularitysmith.github.io/AMTAIR_Prototype/bayesian_network.html"</span>, width<span class="op">=</span><span class="st">"100%"</span>, height<span class="op">=</span><span class="st">"600px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="rain_sprinkler_grass_example_network_rendering2" class="cell-output cell-output-display" data-execution_count="1">

        <iframe width="100%" height="600px" src="https://singularitysmith.github.io/AMTAIR_Prototype/bayesian_network.html" frameborder="0" allowfullscreen=""></iframe>
        
<p>Dynamic Html Rendering of the Rain-Sprinkler-Grass DAG with Conditional Probabilities</p>
</div>
</div>
</section>
</section>
</div>
</section>
<section id="sec-case-carlsmith" class="level2">
<h2 class="anchored" data-anchor-id="sec-case-carlsmith">3.5 Case Study: Carlsmith’s Power-Seeking AI Model</h2>
<!-- [-] TODO: Introduce and refine walkthrough of the pipeline with the more complex Carlsmith model -->
<p>Having validated the implementation on the canonical rain-sprinkler-lawn example, I applied the AMTAIR approach to a substantially more complex real-world case: Joseph Carlsmith’s model of existential risk from power-seeking AI. This application demonstrates the system’s ability to handle sophisticated multi-level arguments with numerous variables and relationships.</p>
<p>Carlsmith’s model represents a dramatic increase in complexity—both conceptually and computationally. Where rain-sprinkler-grass has 3 nodes, Carlsmith involves 23. Where grass wetness is intuitive, “mesa-optimization” and “corrigibility” require careful thought.</p>
<section id="sec-carlsmith-complexity" class="level3">
<h3 class="anchored" data-anchor-id="sec-carlsmith-complexity">3.5.1 Model Complexity</h3>
<p>The numbers tell only part of the story:</p>
<ul>
<li><strong>23 nodes</strong>: Each representing a substantive claim about AI development, deployment, or risk</li>
<li><strong>29 edges</strong>: Encoding causal relationships across technical, strategic, and societal domains</li>
<li><strong>Multiple probability tables</strong>: Many nodes have several parents, creating combinatorial explosion</li>
<li><strong>Six-level causal depth</strong>: From root causes to final catastrophe, influence propagates through multiple stages</li>
</ul>
<p>But the conceptual complexity dwarfs the computational. Nodes like “APS-Systems” (Advanced, Planning, Strategically aware) encode specific technical hypotheses. Relationships like how “incentives to build” influence “deployment despite misalignment” require understanding of organizational behavior under competitive pressure.</p>
<p>This is no longer a toy problem but a serious attempt to formalize one of the most important arguments of our time.</p>
<!-- [-] COMPLETED: Added complexity analysis -->
</section>
<div class="landscape">
<section id="sec-carlsmith-extraction" class="level3">
<h3 class="anchored" data-anchor-id="sec-carlsmith-extraction">3.5.2 Automated Extraction of the Carlsmith’s Argument Structure</h3>
<p>The extraction process began with feeding Carlsmith’s paper to AMTAIR. Watching the system work felt like observing an archaeological excavation—layers of argument slowly revealed their structure.</p>
<p>The LLM prompts for extraction deserve special attention. Through iterative refinement, we developed prompts that guide extraction while remaining flexible:</p>
<pre><code>#| label: prompt_template_function
#| echo: true
#| eval: true
#| fig-cap: "Prompt Template Function Definitions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=MJpgdepF2Ug3&amp;line=5&amp;uniqifier=1"
#| fig-alt: "Prompt Template Function Definitions"</code></pre>
<div class="quarto-embed-nb-cell" data-notebook="/Users/vjm/Library/Mobile Documents/iCloud~md~obsidian/Documents/Vaulty/2_DoingGood/Studies/P&amp;E/Specializations/Test_Sync_MAThesis/submission/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb" data-notebook-title="[AMTAIR Prototype Demonstration (Public Colab Notebook)](https://colab.research.google.com/github/SingularitySmith/AMTAIR_Prototype/blob/main/version_history/AMTAIR_Prototype_0_1.3.ipynb#scrollTo=lt8-AnebGUXr)" data-notebook-cellid="cell-prompt_template_function">
<div id="prompt_template_function" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># @title 1.2.0 --- Prompt Template Function Definitions --- [prompt_template_function]</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">BLOCK PURPOSE: Defines a flexible template system for LLM prompts used in the extraction pipeline.</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">This block implements two key classes:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">1. PromptTemplate: A template class supporting variable substitution for dynamic prompts</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">2. PromptLibrary: A collection of pre-defined prompt templates for different extraction tasks</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">These templates are used in the ArgDown and BayesDown probability extraction</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">stages of the pipeline, providing consistent and well-structured prompts to the LLMs.</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">DEPENDENCIES: string.Template for variable substitution</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">OUTPUTS: PromptTemplate and PromptLibrary classes</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> string <span class="im">import</span> Template</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Dict, Optional, Union, List</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PromptTemplate:</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Template system for LLM prompts with variable substitution"""</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, template: <span class="bu">str</span>):</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Initialize with template string using $variable format"""</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.template <span class="op">=</span> Template(template)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">format</span>(<span class="va">self</span>, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Substitute variables in the template"""</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.template.safe_substitute(<span class="op">**</span>kwargs)</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> from_file(cls, filepath: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="st">'PromptTemplate'</span>:</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Load template from a file"""</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(filepath, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>            template <span class="op">=</span> f.read()</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cls(template)</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PromptLibrary:</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Collection of prompt templates for different extraction tasks"""</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ArgDown extraction prompt - transforms source text into structured argument map</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    ARGDOWN_EXTRACTION <span class="op">=</span> PromptTemplate(<span class="st">"""</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a><span class="st">You are participating in the AMTAIR (Automating Transformative AI Risk Modeling)</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="st">project and you are tasked with converting natural language arguments into</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="st">ArgDown syntax by extracting and formalizing causal world models from</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="st">unstructured text.</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a><span class="st">Your specific task is to extract the implicit causal model from the provided</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="st">document in structured ArgDown format.</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="st">## Epistemic Foundation &amp; Purpose</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="st">This extraction represents one possible interpretation of the implicit causal</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="st">model in the document. Multiple extractions from the same text help reveal</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a><span class="st">patterns of convergence (where the model is clearly articulated) and</span></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a><span class="st">divergence (where the model contains ambiguities). This approach acknowledges</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a><span class="st">that expert texts often contain implicit rather than explicit causal models.</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a><span class="st">Your role is to reveal the causal structure already present in the author's</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="st">thinking, maintaining epistemic humility about your interpretation while</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a><span class="st">adhering strictly to the required format.</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a><span class="st">## ArgDown Format Specification</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a><span class="st">### Core Syntax</span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a><span class="st">ArgDown represents causal relationships using a hierarchical structure:</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a><span class="st">1. Variables appear in square brackets with descriptive text:</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a><span class="st">   `[Variable_Name]: Description of the variable.`</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a><span class="st">2. Causal relationships use indentation (2 spaces per level) and '+' symbols:</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a><span class="st">[Effect]: Description of effect. + [Cause]: Description of cause. + [Deeper_Cause]: Description of deeper cause.</span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="st">3. Causality flows from bottom (more indented) to top (less indented):</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="st">- More indented variables (causes) influence less indented variables (effects)</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a><span class="st">- The top-level variable is the ultimate effect or outcome</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a><span class="st">- Deeper indentation levels represent root causes or earlier factors</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a><span class="st">4. Each variable must include JSON metadata with possible states (instantiations):</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="st">`[Variable]: Description. {"instantiations": ["variable_STATE1", "variable_STATE2"]}`</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="st">### JSON Metadata Format</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a><span class="st">The JSON metadata must follow this exact structure:</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a><span class="st">```json</span></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a><span class="st">{"instantiations": ["variable_STATE1", "variable_STATE2"]}</span></span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a><span class="st">Requirements:</span></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a><span class="st">* Double quotes (not single) around field names and string values</span></span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a><span class="st">* Square brackets enclosing the instantiations array</span></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a><span class="st">* Comma separation between array elements</span></span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a><span class="st">* No trailing comma after the last element</span></span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a><span class="st">* Must be valid JSON syntax that can be parsed by standard JSON parsers</span></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a><span class="st">For binary variables (most common case):</span></span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a><span class="st">{"instantiations": ["variable_TRUE", "variable_FALSE"]}</span></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a><span class="st">For multi-state variables (when clearly specified in the text):</span></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a><span class="st">{"instantiations": ["variable_HIGH", "variable_MEDIUM", "variable_LOW"]}</span></span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a><span class="st">The metadata must appear on the same line as the variable definition, after the description.</span></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a><span class="st">## Complex Structural Patterns</span></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a><span class="st">### Variables Influencing Multiple Effects</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a><span class="st">The same variable can appear multiple times in different places in the hierarchy if it influences multiple effects:</span></span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a><span class="st">[Effect1]: First effect description. {"instantiations": ["effect1_TRUE", "effect1_FALSE"]}</span></span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Cause_A]: Description of cause A. {"instantiations": ["cause_a_TRUE", "cause_a_FALSE"]}</span></span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a><span class="st">[Effect2]: Second effect description. {"instantiations": ["effect2_TRUE", "effect2_FALSE"]}</span></span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Cause_A]</span></span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Cause_B]: Description of cause B. {"instantiations": ["cause_b_TRUE", "cause_b_FALSE"]}</span></span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a><span class="st">### Multiple Causes of the Same Effect</span></span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a><span class="st">Multiple causes can influence the same effect by being listed at the same indentation level:</span></span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a><span class="st">[Effect]: Description of effect. {"instantiations": ["effect_TRUE", "effect_FALSE"]}</span></span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Cause1]: Description of first cause. {"instantiations": ["cause1_TRUE", "cause1_FALSE"]}</span></span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Cause2]: Description of second cause. {"instantiations": ["cause2_TRUE", "cause2_FALSE"]}</span></span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a><span class="st">    + [Deeper_Cause]: A cause that influences Cause2. {"instantiations": ["deeper_cause_TRUE", "deeper_cause_FALSE"]}</span></span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a><span class="st">### Causal Chains</span></span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a><span class="st">Causal chains are represented through multiple levels of indentation:</span></span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a><span class="st">[Ultimate_Effect]: The final outcome. {"instantiations": ["ultimate_effect_TRUE", "ultimate_effect_FALSE"]}</span></span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Intermediate_Effect]: A mediating variable. {"instantiations": ["intermediate_effect_TRUE", "intermediate_effect_FALSE"]}</span></span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a><span class="st">    + [Root_Cause]: The initial cause. {"instantiations": ["root_cause_TRUE", "root_cause_FALSE"]}</span></span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a><span class="st">  + [2nd_Intermediate_Effect]: A mediating variable. {"instantiations": ["intermediate_effect_TRUE", "intermediate_effect_FALSE"]}</span></span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a><span class="st">### Common Cause of Multiple Variables</span></span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a><span class="st">A common cause affecting multiple variables is represented by referencing the same variable in multiple places:</span></span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a><span class="st">[Effect1]: First effect description. {"instantiations": ["effect1_TRUE", "effect1_FALSE"]}</span></span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Common_Cause]: Description of common cause. {"instantiations": ["common_cause_TRUE", "common_cause_FALSE"]}</span></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a><span class="st">[Effect2]: Second effect description. {"instantiations": ["effect2_TRUE", "effect2_FALSE"]}</span></span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a><span class="st">  + [Common_Cause]</span></span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a><span class="st">## Detailed Extraction Workflow</span></span>
<span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a><span class="st">Please follow this step-by-step process, documenting your reasoning in XML tags:</span></span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;analysis&gt;</span></span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a><span class="st">First, conduct a holistic analysis of the document:</span></span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a><span class="st">1. Identify the main subject matter or domain</span></span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a><span class="st">2. Note key concepts, variables, and factors discussed</span></span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a><span class="st">3. Pay attention to language indicating causal relationships (causes, affects, influences, depends on, etc.)</span></span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a><span class="st">4. Look for the ultimate outcomes or effects that are the focus of the document</span></span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a><span class="st">5. Record your general understanding of the document's implicit causal structure</span></span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/analysis&gt;</span></span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;variable_identification&gt;</span></span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a><span class="st">Next, identify and list the key variables in the causal model:</span></span>
<span id="cb9-149"><a href="#cb9-149" aria-hidden="true" tabindex="-1"></a><span class="st">* Focus on factors that are discussed as having an influence or being influenced</span></span>
<span id="cb9-150"><a href="#cb9-150" aria-hidden="true" tabindex="-1"></a><span class="st">* For each variable:</span></span>
<span id="cb9-151"><a href="#cb9-151" aria-hidden="true" tabindex="-1"></a><span class="st">  * Create a descriptive name in [square_brackets]</span></span>
<span id="cb9-152"><a href="#cb9-152" aria-hidden="true" tabindex="-1"></a><span class="st">  * Write a concise description based directly on the text</span></span>
<span id="cb9-153"><a href="#cb9-153" aria-hidden="true" tabindex="-1"></a><span class="st">  * Determine possible states (usually binary TRUE/FALSE unless clearly specified)</span></span>
<span id="cb9-154"><a href="#cb9-154" aria-hidden="true" tabindex="-1"></a><span class="st">* Distinguish between:</span></span>
<span id="cb9-155"><a href="#cb9-155" aria-hidden="true" tabindex="-1"></a><span class="st">  * Outcome variables (effects the author is concerned with)</span></span>
<span id="cb9-156"><a href="#cb9-156" aria-hidden="true" tabindex="-1"></a><span class="st">  * Intermediate variables (both causes and effects in chains)</span></span>
<span id="cb9-157"><a href="#cb9-157" aria-hidden="true" tabindex="-1"></a><span class="st">  * Root cause variables (exogenous factors in the model)</span></span>
<span id="cb9-158"><a href="#cb9-158" aria-hidden="true" tabindex="-1"></a><span class="st">* List all identified variables with their descriptions and possible states</span></span>
<span id="cb9-159"><a href="#cb9-159" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/variable_identification&gt;</span></span>
<span id="cb9-160"><a href="#cb9-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-161"><a href="#cb9-161" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;causal_structure&gt;</span></span>
<span id="cb9-162"><a href="#cb9-162" aria-hidden="true" tabindex="-1"></a><span class="st">Then, determine the causal relationships between variables:</span></span>
<span id="cb9-163"><a href="#cb9-163" aria-hidden="true" tabindex="-1"></a><span class="st">* For each variable, identify what factors influence it</span></span>
<span id="cb9-164"><a href="#cb9-164" aria-hidden="true" tabindex="-1"></a><span class="st">* Note the direction of causality (what causes what)</span></span>
<span id="cb9-165"><a href="#cb9-165" aria-hidden="true" tabindex="-1"></a><span class="st">* Look for mediating variables in causal chains</span></span>
<span id="cb9-166"><a href="#cb9-166" aria-hidden="true" tabindex="-1"></a><span class="st">* Identify common causes of multiple effects</span></span>
<span id="cb9-167"><a href="#cb9-167" aria-hidden="true" tabindex="-1"></a><span class="st">* Capture feedback loops if present (though they must be represented as DAGs)</span></span>
<span id="cb9-168"><a href="#cb9-168" aria-hidden="true" tabindex="-1"></a><span class="st">* Map out the hierarchical structure of the causal model</span></span>
<span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/causal_structure&gt;</span></span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;format_conversion&gt;</span></span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a><span class="st">Now, convert your analysis into proper ArgDown format:</span></span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a><span class="st">* Start with the ultimate outcome variables at the top level</span></span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a><span class="st">* Place direct causes indented below with </span><span class="er">\</span><span class="st">+ symbols</span></span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a><span class="st">* Continue with deeper causes at further indentation levels</span></span>
<span id="cb9-176"><a href="#cb9-176" aria-hidden="true" tabindex="-1"></a><span class="st">* Add variable descriptions and instantiations metadata</span></span>
<span id="cb9-177"><a href="#cb9-177" aria-hidden="true" tabindex="-1"></a><span class="st">* Ensure variables appearing in multiple places have consistent names</span></span>
<span id="cb9-178"><a href="#cb9-178" aria-hidden="true" tabindex="-1"></a><span class="st">* Check that the entire structure forms a valid directed acyclic graph</span></span>
<span id="cb9-179"><a href="#cb9-179" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/format_conversion&gt;</span></span>
<span id="cb9-180"><a href="#cb9-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-181"><a href="#cb9-181" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;validation&gt;</span></span>
<span id="cb9-182"><a href="#cb9-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-183"><a href="#cb9-183" aria-hidden="true" tabindex="-1"></a><span class="st">Finally, review your extraction for quality and format correctness:</span></span>
<span id="cb9-184"><a href="#cb9-184" aria-hidden="true" tabindex="-1"></a><span class="st">1. Verify all variables have properly formatted metadata</span></span>
<span id="cb9-185"><a href="#cb9-185" aria-hidden="true" tabindex="-1"></a><span class="st">2. Check that indentation properly represents causal direction</span></span>
<span id="cb9-186"><a href="#cb9-186" aria-hidden="true" tabindex="-1"></a><span class="st">3. Confirm the extraction accurately reflects the document's implicit model</span></span>
<span id="cb9-187"><a href="#cb9-187" aria-hidden="true" tabindex="-1"></a><span class="st">4. Ensure no cycles exist in the causal structure</span></span>
<span id="cb9-188"><a href="#cb9-188" aria-hidden="true" tabindex="-1"></a><span class="st">5. Verify that variables referenced multiple times are consistent</span></span>
<span id="cb9-189"><a href="#cb9-189" aria-hidden="true" tabindex="-1"></a><span class="st">6. Check that the extraction would be useful for subsequent analysis</span></span>
<span id="cb9-190"><a href="#cb9-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-191"><a href="#cb9-191" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/validation&gt;</span></span>
<span id="cb9-192"><a href="#cb9-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-194"><a href="#cb9-194" aria-hidden="true" tabindex="-1"></a><span class="st">## Source Document Analysis Guidance</span></span>
<span id="cb9-195"><a href="#cb9-195" aria-hidden="true" tabindex="-1"></a><span class="st">When analyzing the source document:</span></span>
<span id="cb9-196"><a href="#cb9-196" aria-hidden="true" tabindex="-1"></a><span class="st">* Focus on revealing the author's own causal model, not imposing an external framework</span></span>
<span id="cb9-197"><a href="#cb9-197" aria-hidden="true" tabindex="-1"></a><span class="st">* Maintain the author's terminology where possible</span></span>
<span id="cb9-198"><a href="#cb9-198" aria-hidden="true" tabindex="-1"></a><span class="st">* Look for both explicit statements of causality and implicit assumptions</span></span>
<span id="cb9-199"><a href="#cb9-199" aria-hidden="true" tabindex="-1"></a><span class="st">* Pay attention to the relative importance the author assigns to different factors</span></span>
<span id="cb9-200"><a href="#cb9-200" aria-hidden="true" tabindex="-1"></a><span class="st">* Notice where the author expresses certainty versus uncertainty</span></span>
<span id="cb9-201"><a href="#cb9-201" aria-hidden="true" tabindex="-1"></a><span class="st">* Consider the level of granularity appropriate to the document's own analysis</span></span>
<span id="cb9-202"><a href="#cb9-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-203"><a href="#cb9-203" aria-hidden="true" tabindex="-1"></a><span class="st">Remember that your goal is to make the implicit model explicit, not to evaluate or improve it.</span></span>
<span id="cb9-204"><a href="#cb9-204" aria-hidden="true" tabindex="-1"></a><span class="st">The value lies in accurately representing the author's perspective, even if you might personally disagree or see limitations in their model.</span></span>
<span id="cb9-205"><a href="#cb9-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-206"><a href="#cb9-206" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>)</span>
<span id="cb9-207"><a href="#cb9-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-208"><a href="#cb9-208" aria-hidden="true" tabindex="-1"></a>    <span class="co"># BayesDown probability extraction prompt - enhances ArgDown with probability information</span></span>
<span id="cb9-209"><a href="#cb9-209" aria-hidden="true" tabindex="-1"></a>    BAYESDOWN_EXTRACTION <span class="op">=</span> PromptTemplate(<span class="st">"""</span></span>
<span id="cb9-210"><a href="#cb9-210" aria-hidden="true" tabindex="-1"></a><span class="st">You are an expert in probabilistic reasoning and Bayesian networks. Your task is</span></span>
<span id="cb9-211"><a href="#cb9-211" aria-hidden="true" tabindex="-1"></a><span class="st">to extend the provided ArgDown structure with probability information,</span></span>
<span id="cb9-212"><a href="#cb9-212" aria-hidden="true" tabindex="-1"></a><span class="st">creating a BayesDown representation.</span></span>
<span id="cb9-213"><a href="#cb9-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-214"><a href="#cb9-214" aria-hidden="true" tabindex="-1"></a><span class="st">For each statement in the ArgDown structure, you need to:</span></span>
<span id="cb9-215"><a href="#cb9-215" aria-hidden="true" tabindex="-1"></a><span class="st">1. Estimate prior probabilities for each possible state</span></span>
<span id="cb9-216"><a href="#cb9-216" aria-hidden="true" tabindex="-1"></a><span class="st">2. Estimate conditional probabilities given parent states</span></span>
<span id="cb9-217"><a href="#cb9-217" aria-hidden="true" tabindex="-1"></a><span class="st">3. Maintain the original structure and relationships</span></span>
<span id="cb9-218"><a href="#cb9-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-219"><a href="#cb9-219" aria-hidden="true" tabindex="-1"></a><span class="st">Here is the format to follow:</span></span>
<span id="cb9-220"><a href="#cb9-220" aria-hidden="true" tabindex="-1"></a><span class="st">[Node]: Description. { "instantiations": ["node_TRUE", "node_FALSE"], "priors": { "p(node_TRUE)": "0.7", "p(node_FALSE)": "0.3" }, "posteriors": { "p(node_TRUE|parent_TRUE)": "0.9", "p(node_TRUE|parent_FALSE)": "0.4", "p(node_FALSE|parent_TRUE)": "0.1", "p(node_FALSE|parent_FALSE)": "0.6" } }</span></span>
<span id="cb9-221"><a href="#cb9-221" aria-hidden="true" tabindex="-1"></a><span class="st"> [Parent]: Parent description. {...}</span></span>
<span id="cb9-222"><a href="#cb9-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-223"><a href="#cb9-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-224"><a href="#cb9-224" aria-hidden="true" tabindex="-1"></a><span class="st">Here are the specific probability questions to answer:</span></span>
<span id="cb9-225"><a href="#cb9-225" aria-hidden="true" tabindex="-1"></a><span class="st">$questions</span></span>
<span id="cb9-226"><a href="#cb9-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-227"><a href="#cb9-227" aria-hidden="true" tabindex="-1"></a><span class="st">ArgDown structure to enhance:</span></span>
<span id="cb9-228"><a href="#cb9-228" aria-hidden="true" tabindex="-1"></a><span class="st">$argdown</span></span>
<span id="cb9-229"><a href="#cb9-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-230"><a href="#cb9-230" aria-hidden="true" tabindex="-1"></a><span class="st">Provide the complete BayesDown representation with probabilities:</span></span>
<span id="cb9-231"><a href="#cb9-231" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>)</span>
<span id="cb9-232"><a href="#cb9-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-233"><a href="#cb9-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb9-234"><a href="#cb9-234" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_template(cls, template_name: <span class="bu">str</span>) <span class="op">-&gt;</span> PromptTemplate:</span>
<span id="cb9-235"><a href="#cb9-235" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Get a prompt template by name"""</span></span>
<span id="cb9-236"><a href="#cb9-236" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">hasattr</span>(cls, template_name):</span>
<span id="cb9-237"><a href="#cb9-237" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="bu">getattr</span>(cls, template_name)</span>
<span id="cb9-238"><a href="#cb9-238" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb9-239"><a href="#cb9-239" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f"Template not found: </span><span class="sc">{</span>template_name<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<!-- python

```python
ARGDOWN_EXTRACTION = PromptTemplate("""
You are extracting the causal model from an AI safety argument.
Focus on:
1. Identifying key variables that affect outcomes
2. Capturing causal relationships (not mere association)  
3. Preserving the author's terminology where possible
4. Creating a directed acyclic graph structure

For Carlsmith's argument about power-seeking AI, pay special attention to:
- The chain from capabilities to catastrophe
- Conditional relationships (X matters only if Y)
- Technical preconditions for risk
""")
``` -->
<section id="prompting-llms-for-argdown-extraction" class="level4">
<h4 class="anchored" data-anchor-id="prompting-llms-for-argdown-extraction">Prompting LLMs for ArgDown Extraction</h4>
<!-- 
#| label: prompt_template_function
#| echo: true
#| eval: true
#| fig-cap: "Prompt Template Function Definitions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=MJpgdepF2Ug3&line=5&uniqifier=1"
#| fig-alt: "Prompt Template Function Definitions"
-->
<p>The extraction revealed Carlsmith’s elegant decomposition. At the highest level: capabilities enable power-seeking, which enables disempowerment, which constitutes catastrophe. But the details matter—deployment decisions mediated by incentives and deception, alignment difficulty influenced by multiple technical factors, corrective mechanisms that might interrupt the chain.</p>
<p>The ArgDown representation captured this structure: <!-- 
```markdown
[Existential_Catastrophe]: Permanent curtailment of humanity's potential
 + [Human_Disempowerment]: Humans lose control over future
   + [Scale_Of_Power_Seeking]: Power-seeking behavior becomes overwhelming
     + [Misaligned_Power_Seeking]: AI systems pursue problematic objectives
       + [APS_Systems]: Advanced, planning, strategically aware AI
       + [Alignment_Difficulty]: Hard to align such systems
       + [Deployment_Despite_Misalignment]: Systems deployed anyway
         + [Incentives_To_Build]: Strong pressure to develop AI
         + [Deception]: AI systems hide misalignment
```
--></p>
<div class="quarto-embed-nb-cell" data-notebook="/Users/vjm/Library/Mobile Documents/iCloud~md~obsidian/Documents/Vaulty/2_DoingGood/Studies/P&amp;E/Specializations/Test_Sync_MAThesis/submission/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb" data-notebook-title="[AMTAIR Prototype Demonstration (Public Colab Notebook)](https://colab.research.google.com/github/SingularitySmith/AMTAIR_Prototype/blob/main/version_history/AMTAIR_Prototype_0_1.3.ipynb#scrollTo=lt8-AnebGUXr)" data-notebook-cellid="cell-parsing_argdown_bayesdown">
<div id="parsing_argdown_bayesdown" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># @title 1.7.0 --- Parsing ArgDown &amp; BayesDown (.md to .csv) --- [parsing_argdown_bayesdown]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">BLOCK PURPOSE: Provides the core parsing functionality for transforming ArgDown</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">and BayesDown text representations into structured DataFrame format for further</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">processing.</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">This block implements the critical extraction pipeline described in the AMTAIR</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">project (see PY_TechnicalImplementation) that converts argument structures</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">into Bayesian networks.</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">The function can handle both basic ArgDown (structure-only) and</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">BayesDown (with probabilities).</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">Key steps in the parsing process:</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">1. Remove comments from the markdown text</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">2. Extract titles, descriptions, and indentation levels</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">3. Establish parent-child relationships based on indentation</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">4. Convert the structured information into a DataFrame</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">5. Add derived columns for network analysis</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">DEPENDENCIES: pandas, re, json libraries</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">INPUTS: Markdown text in ArgDown/BayesDown format</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">OUTPUTS: Structured DataFrame with node information, relationships, and properties</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse_markdown_hierarchy_fixed(markdown_text, ArgDown<span class="op">=</span><span class="va">False</span>):</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">    Parse ArgDown or BayesDown format into a structured DataFrame with parent-child relationships.</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">        markdown_text (str): Text in ArgDown or BayesDown format</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">        ArgDown (bool): If True, extracts only structure without probabilities</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co">                        If False, extracts both structure and probability information</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="co">        pandas.DataFrame: Structured data with node information, relationships, and attributes</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># PHASE 1: Clean and prepare the text</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>    clean_text <span class="op">=</span> remove_comments(markdown_text)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># PHASE 2: Extract basic information about nodes</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    titles_info <span class="op">=</span> extract_titles_info(clean_text)</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># PHASE 3: Determine the hierarchical relationships</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    titles_with_relations <span class="op">=</span> establish_relationships_fixed(titles_info, clean_text)</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># PHASE 4: Convert to structured DataFrame format</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> convert_to_dataframe(titles_with_relations, ArgDown)</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># PHASE 5: Add derived columns for analysis</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> add_no_parent_no_child_columns_to_df(df)</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> add_parents_instantiation_columns_to_df(df)</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_comments(markdown_text):</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a><span class="co">    Remove comment blocks from markdown text using regex pattern matching.</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a><span class="co">        markdown_text (str): Text containing potential comment blocks</span></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a><span class="co">        str: Text with comment blocks removed</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove anything between /* and */ using regex</span></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> re.sub(<span class="vs">r'/</span><span class="ch">\*</span><span class="dv">.</span><span class="op">*?</span><span class="ch">\*</span><span class="vs">/'</span>, <span class="st">''</span>, markdown_text, flags<span class="op">=</span>re.DOTALL)</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_titles_info(text):</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a><span class="co">    Extract titles with their descriptions and indentation levels from markdown text.</span></span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a><span class="co">        text (str): Cleaned markdown text</span></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a><span class="co">        dict: Dictionary with titles as keys and dictionaries of attributes as values</span></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>    lines <span class="op">=</span> text.split(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a>    titles_info <span class="op">=</span> {}</span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Skip empty lines</span></span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> line.strip():</span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract title within square or angle brackets</span></span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>        title_match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="pp">[&lt;</span><span class="ch">\[</span><span class="pp">]</span><span class="kw">(</span><span class="dv">.</span><span class="op">+?</span><span class="kw">)</span><span class="pp">[&gt;</span><span class="ch">\]</span><span class="pp">]</span><span class="vs">'</span>, line)</span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> title_match:</span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> title_match.group(<span class="dv">1</span>)</span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract description and metadata</span></span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a>        title_pattern_in_line <span class="op">=</span> <span class="vs">r'</span><span class="pp">[&lt;</span><span class="ch">\[</span><span class="pp">]</span><span class="vs">'</span> <span class="op">+</span> re.escape(title) <span class="op">+</span> <span class="vs">r'</span><span class="pp">[&gt;</span><span class="ch">\]</span><span class="pp">]</span><span class="vs">:'</span></span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>        description_match <span class="op">=</span> re.search(title_pattern_in_line <span class="op">+</span> <span class="vs">r'</span><span class="dv">\s</span><span class="op">*</span><span class="kw">(</span><span class="dv">.</span><span class="op">*</span><span class="kw">)</span><span class="vs">'</span>, line)</span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> description_match:</span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a>            full_text <span class="op">=</span> description_match.group(<span class="dv">1</span>).strip()</span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Split description and metadata at the first "{"</span></span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">"{"</span> <span class="kw">in</span> full_text:</span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a>                split_index <span class="op">=</span> full_text.find(<span class="st">"{"</span>)</span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a>                description <span class="op">=</span> full_text[:split_index].strip()</span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a>                metadata <span class="op">=</span> full_text[split_index:].strip()</span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Keep the entire description and no metadata</span></span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>                description <span class="op">=</span> full_text</span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a>                metadata <span class="op">=</span> <span class="st">''</span>  <span class="co"># Initialize as empty string</span></span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a>            description <span class="op">=</span> <span class="st">''</span></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a>            metadata <span class="op">=</span> <span class="st">''</span>  <span class="co"># Ensure metadata is initialized</span></span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Calculate indentation level based on spaces before + or - symbol</span></span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a>        indentation <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'+'</span> <span class="kw">in</span> line:</span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a>            symbol_index <span class="op">=</span> line.find(<span class="st">'+'</span>)</span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Count spaces before the '+' symbol</span></span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a>            i <span class="op">=</span> symbol_index <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> i <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> line[i] <span class="op">==</span> <span class="st">' '</span>:</span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a>                indentation <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a>                i <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="st">'-'</span> <span class="kw">in</span> line:</span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a>            symbol_index <span class="op">=</span> line.find(<span class="st">'-'</span>)</span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Count spaces before the '-' symbol</span></span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a>            i <span class="op">=</span> symbol_index <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> i <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> line[i] <span class="op">==</span> <span class="st">' '</span>:</span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a>                indentation <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a>                i <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a>        <span class="co"># If neither symbol exists, indentation remains 0</span></span>
<span id="cb10-132"><a href="#cb10-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-133"><a href="#cb10-133" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> title <span class="kw">in</span> titles_info:</span>
<span id="cb10-134"><a href="#cb10-134" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Only update description if it's currently empty and we found a new one</span></span>
<span id="cb10-135"><a href="#cb10-135" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> titles_info[title][<span class="st">'description'</span>] <span class="kw">and</span> description:</span>
<span id="cb10-136"><a href="#cb10-136" aria-hidden="true" tabindex="-1"></a>                titles_info[title][<span class="st">'description'</span>] <span class="op">=</span> description</span>
<span id="cb10-137"><a href="#cb10-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-138"><a href="#cb10-138" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Store all indentation levels for this title</span></span>
<span id="cb10-139"><a href="#cb10-139" aria-hidden="true" tabindex="-1"></a>            titles_info[title][<span class="st">'indentation_levels'</span>].append(indentation)</span>
<span id="cb10-140"><a href="#cb10-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-141"><a href="#cb10-141" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Keep max indentation for backward compatibility</span></span>
<span id="cb10-142"><a href="#cb10-142" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> indentation <span class="op">&gt;</span> titles_info[title][<span class="st">'indentation'</span>]:</span>
<span id="cb10-143"><a href="#cb10-143" aria-hidden="true" tabindex="-1"></a>                titles_info[title][<span class="st">'indentation'</span>] <span class="op">=</span> indentation</span>
<span id="cb10-144"><a href="#cb10-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-145"><a href="#cb10-145" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Do NOT update metadata here - keep the original metadata</span></span>
<span id="cb10-146"><a href="#cb10-146" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb10-147"><a href="#cb10-147" aria-hidden="true" tabindex="-1"></a>            <span class="co"># First time seeing this title, create a new entry</span></span>
<span id="cb10-148"><a href="#cb10-148" aria-hidden="true" tabindex="-1"></a>            titles_info[title] <span class="op">=</span> {</span>
<span id="cb10-149"><a href="#cb10-149" aria-hidden="true" tabindex="-1"></a>                <span class="st">'description'</span>: description,</span>
<span id="cb10-150"><a href="#cb10-150" aria-hidden="true" tabindex="-1"></a>                <span class="st">'indentation'</span>: indentation,</span>
<span id="cb10-151"><a href="#cb10-151" aria-hidden="true" tabindex="-1"></a>                <span class="st">'indentation_levels'</span>: [indentation],  <span class="co"># Initialize with first indentation level</span></span>
<span id="cb10-152"><a href="#cb10-152" aria-hidden="true" tabindex="-1"></a>                <span class="st">'parents'</span>: [],</span>
<span id="cb10-153"><a href="#cb10-153" aria-hidden="true" tabindex="-1"></a>                <span class="st">'children'</span>: [],</span>
<span id="cb10-154"><a href="#cb10-154" aria-hidden="true" tabindex="-1"></a>                <span class="st">'line'</span>: <span class="va">None</span>,</span>
<span id="cb10-155"><a href="#cb10-155" aria-hidden="true" tabindex="-1"></a>                <span class="st">'line_numbers'</span>: [],  <span class="co"># Initialize an empty list for all occurrences</span></span>
<span id="cb10-156"><a href="#cb10-156" aria-hidden="true" tabindex="-1"></a>                <span class="st">'metadata'</span>: metadata  <span class="co"># Set metadata explicitly from what we found</span></span>
<span id="cb10-157"><a href="#cb10-157" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-158"><a href="#cb10-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-159"><a href="#cb10-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> titles_info</span>
<span id="cb10-160"><a href="#cb10-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-161"><a href="#cb10-161" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> establish_relationships_fixed(titles_info, text):</span>
<span id="cb10-162"><a href="#cb10-162" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-163"><a href="#cb10-163" aria-hidden="true" tabindex="-1"></a><span class="co">    Establish parent-child relationships between titles using BayesDown</span></span>
<span id="cb10-164"><a href="#cb10-164" aria-hidden="true" tabindex="-1"></a><span class="co">    indentation rules.</span></span>
<span id="cb10-165"><a href="#cb10-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-166"><a href="#cb10-166" aria-hidden="true" tabindex="-1"></a><span class="co">    In BayesDown syntax:</span></span>
<span id="cb10-167"><a href="#cb10-167" aria-hidden="true" tabindex="-1"></a><span class="co">    - More indented nodes (with + symbol) are PARENTS of less indented nodes</span></span>
<span id="cb10-168"><a href="#cb10-168" aria-hidden="true" tabindex="-1"></a><span class="co">    - The relationship reads as "Effect is caused by Cause" (Effect + Cause)</span></span>
<span id="cb10-169"><a href="#cb10-169" aria-hidden="true" tabindex="-1"></a><span class="co">    - This aligns with how Bayesian networks represent causality</span></span>
<span id="cb10-170"><a href="#cb10-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-171"><a href="#cb10-171" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-172"><a href="#cb10-172" aria-hidden="true" tabindex="-1"></a><span class="co">        titles_info (dict): Dictionary with information about titles</span></span>
<span id="cb10-173"><a href="#cb10-173" aria-hidden="true" tabindex="-1"></a><span class="co">        text (str): Original markdown text (for identifying line numbers)</span></span>
<span id="cb10-174"><a href="#cb10-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-175"><a href="#cb10-175" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-176"><a href="#cb10-176" aria-hidden="true" tabindex="-1"></a><span class="co">        dict: Updated dictionary with parent-child relationships</span></span>
<span id="cb10-177"><a href="#cb10-177" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-178"><a href="#cb10-178" aria-hidden="true" tabindex="-1"></a>    lines <span class="op">=</span> text.split(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb10-179"><a href="#cb10-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-180"><a href="#cb10-180" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dictionary to store line numbers for each title occurrence</span></span>
<span id="cb10-181"><a href="#cb10-181" aria-hidden="true" tabindex="-1"></a>    title_occurrences <span class="op">=</span> {}</span>
<span id="cb10-182"><a href="#cb10-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-183"><a href="#cb10-183" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Record line number for each title (including multiple occurrences)</span></span>
<span id="cb10-184"><a href="#cb10-184" aria-hidden="true" tabindex="-1"></a>    line_number <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb10-185"><a href="#cb10-185" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb10-186"><a href="#cb10-186" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> line.strip():</span>
<span id="cb10-187"><a href="#cb10-187" aria-hidden="true" tabindex="-1"></a>            line_number <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-188"><a href="#cb10-188" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-189"><a href="#cb10-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-190"><a href="#cb10-190" aria-hidden="true" tabindex="-1"></a>        title_match <span class="op">=</span> re.search(<span class="vs">r'</span><span class="pp">[&lt;</span><span class="ch">\[</span><span class="pp">]</span><span class="kw">(</span><span class="dv">.</span><span class="op">+?</span><span class="kw">)</span><span class="pp">[&gt;</span><span class="ch">\]</span><span class="pp">]</span><span class="vs">'</span>, line)</span>
<span id="cb10-191"><a href="#cb10-191" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> title_match:</span>
<span id="cb10-192"><a href="#cb10-192" aria-hidden="true" tabindex="-1"></a>            line_number <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-193"><a href="#cb10-193" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-194"><a href="#cb10-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-195"><a href="#cb10-195" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> title_match.group(<span class="dv">1</span>)</span>
<span id="cb10-196"><a href="#cb10-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-197"><a href="#cb10-197" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Store all occurrences of each title with their line numbers</span></span>
<span id="cb10-198"><a href="#cb10-198" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> title <span class="kw">not</span> <span class="kw">in</span> title_occurrences:</span>
<span id="cb10-199"><a href="#cb10-199" aria-hidden="true" tabindex="-1"></a>            title_occurrences[title] <span class="op">=</span> []</span>
<span id="cb10-200"><a href="#cb10-200" aria-hidden="true" tabindex="-1"></a>        title_occurrences[title].append(line_number)</span>
<span id="cb10-201"><a href="#cb10-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-202"><a href="#cb10-202" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Store all line numbers where this title appears</span></span>
<span id="cb10-203"><a href="#cb10-203" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'line_numbers'</span> <span class="kw">not</span> <span class="kw">in</span> titles_info[title]:</span>
<span id="cb10-204"><a href="#cb10-204" aria-hidden="true" tabindex="-1"></a>            titles_info[title][<span class="st">'line_numbers'</span>] <span class="op">=</span> []</span>
<span id="cb10-205"><a href="#cb10-205" aria-hidden="true" tabindex="-1"></a>        titles_info[title][<span class="st">'line_numbers'</span>].append(line_number)</span>
<span id="cb10-206"><a href="#cb10-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-207"><a href="#cb10-207" aria-hidden="true" tabindex="-1"></a>        <span class="co"># For backward compatibility, keep the first occurrence in 'line'</span></span>
<span id="cb10-208"><a href="#cb10-208" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> titles_info[title][<span class="st">'line'</span>] <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb10-209"><a href="#cb10-209" aria-hidden="true" tabindex="-1"></a>            titles_info[title][<span class="st">'line'</span>] <span class="op">=</span> line_number</span>
<span id="cb10-210"><a href="#cb10-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-211"><a href="#cb10-211" aria-hidden="true" tabindex="-1"></a>        line_number <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-212"><a href="#cb10-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-213"><a href="#cb10-213" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create an ordered list of all title occurrences with their line numbers</span></span>
<span id="cb10-214"><a href="#cb10-214" aria-hidden="true" tabindex="-1"></a>    all_occurrences <span class="op">=</span> []</span>
<span id="cb10-215"><a href="#cb10-215" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> title, occurrences <span class="kw">in</span> title_occurrences.items():</span>
<span id="cb10-216"><a href="#cb10-216" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line_num <span class="kw">in</span> occurrences:</span>
<span id="cb10-217"><a href="#cb10-217" aria-hidden="true" tabindex="-1"></a>            all_occurrences.append((title, line_num))</span>
<span id="cb10-218"><a href="#cb10-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-219"><a href="#cb10-219" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sort occurrences by line number</span></span>
<span id="cb10-220"><a href="#cb10-220" aria-hidden="true" tabindex="-1"></a>    all_occurrences.sort(key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])</span>
<span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get indentation for each occurrence</span></span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a>    occurrence_indents <span class="op">=</span> {}</span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> title, line_num <span class="kw">in</span> all_occurrences:</span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> lines[line_num:line_num<span class="op">+</span><span class="dv">1</span>]:  <span class="co"># Only check the current line</span></span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a>            indent <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'+'</span> <span class="kw">in</span> line:</span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a>                symbol_index <span class="op">=</span> line.find(<span class="st">'+'</span>)</span>
<span id="cb10-229"><a href="#cb10-229" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Count spaces before the '+' symbol</span></span>
<span id="cb10-230"><a href="#cb10-230" aria-hidden="true" tabindex="-1"></a>                j <span class="op">=</span> symbol_index <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb10-231"><a href="#cb10-231" aria-hidden="true" tabindex="-1"></a>                <span class="cf">while</span> j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> line[j] <span class="op">==</span> <span class="st">' '</span>:</span>
<span id="cb10-232"><a href="#cb10-232" aria-hidden="true" tabindex="-1"></a>                    indent <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-233"><a href="#cb10-233" aria-hidden="true" tabindex="-1"></a>                    j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb10-234"><a href="#cb10-234" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="st">'-'</span> <span class="kw">in</span> line:</span>
<span id="cb10-235"><a href="#cb10-235" aria-hidden="true" tabindex="-1"></a>                symbol_index <span class="op">=</span> line.find(<span class="st">'-'</span>)</span>
<span id="cb10-236"><a href="#cb10-236" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Count spaces before the '-' symbol</span></span>
<span id="cb10-237"><a href="#cb10-237" aria-hidden="true" tabindex="-1"></a>                j <span class="op">=</span> symbol_index <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb10-238"><a href="#cb10-238" aria-hidden="true" tabindex="-1"></a>                <span class="cf">while</span> j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> line[j] <span class="op">==</span> <span class="st">' '</span>:</span>
<span id="cb10-239"><a href="#cb10-239" aria-hidden="true" tabindex="-1"></a>                    indent <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-240"><a href="#cb10-240" aria-hidden="true" tabindex="-1"></a>                    j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb10-241"><a href="#cb10-241" aria-hidden="true" tabindex="-1"></a>            occurrence_indents[(title, line_num)] <span class="op">=</span> indent</span>
<span id="cb10-242"><a href="#cb10-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-243"><a href="#cb10-243" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Enhanced backward pass for correct parent-child relationships</span></span>
<span id="cb10-244"><a href="#cb10-244" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, (title, line_num) <span class="kw">in</span> <span class="bu">enumerate</span>(all_occurrences):</span>
<span id="cb10-245"><a href="#cb10-245" aria-hidden="true" tabindex="-1"></a>        current_indent <span class="op">=</span> occurrence_indents[(title, line_num)]</span>
<span id="cb10-246"><a href="#cb10-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-247"><a href="#cb10-247" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Skip root nodes (indentation 0) for processing</span></span>
<span id="cb10-248"><a href="#cb10-248" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> current_indent <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb10-249"><a href="#cb10-249" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-250"><a href="#cb10-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-251"><a href="#cb10-251" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Look for the immediately preceding node with lower indentation</span></span>
<span id="cb10-252"><a href="#cb10-252" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb10-253"><a href="#cb10-253" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb10-254"><a href="#cb10-254" aria-hidden="true" tabindex="-1"></a>            prev_title, prev_line <span class="op">=</span> all_occurrences[j]</span>
<span id="cb10-255"><a href="#cb10-255" aria-hidden="true" tabindex="-1"></a>            prev_indent <span class="op">=</span> occurrence_indents[(prev_title, prev_line)]</span>
<span id="cb10-256"><a href="#cb10-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-257"><a href="#cb10-257" aria-hidden="true" tabindex="-1"></a>            <span class="co"># If we find a node with less indentation, it's a child of current node</span></span>
<span id="cb10-258"><a href="#cb10-258" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> prev_indent <span class="op">&lt;</span> current_indent:</span>
<span id="cb10-259"><a href="#cb10-259" aria-hidden="true" tabindex="-1"></a>                <span class="co"># In BayesDown:</span></span>
<span id="cb10-260"><a href="#cb10-260" aria-hidden="true" tabindex="-1"></a>                <span class="co"># More indented node is a parent (cause) of less indented node (effect)</span></span>
<span id="cb10-261"><a href="#cb10-261" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> title <span class="kw">not</span> <span class="kw">in</span> titles_info[prev_title][<span class="st">'parents'</span>]:</span>
<span id="cb10-262"><a href="#cb10-262" aria-hidden="true" tabindex="-1"></a>                    titles_info[prev_title][<span class="st">'parents'</span>].append(title)</span>
<span id="cb10-263"><a href="#cb10-263" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> prev_title <span class="kw">not</span> <span class="kw">in</span> titles_info[title][<span class="st">'children'</span>]:</span>
<span id="cb10-264"><a href="#cb10-264" aria-hidden="true" tabindex="-1"></a>                    titles_info[title][<span class="st">'children'</span>].append(prev_title)</span>
<span id="cb10-265"><a href="#cb10-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-266"><a href="#cb10-266" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Only need to find the immediate child</span></span>
<span id="cb10-267"><a href="#cb10-267" aria-hidden="true" tabindex="-1"></a>                <span class="co"># (closest preceding node with lower indentation)</span></span>
<span id="cb10-268"><a href="#cb10-268" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb10-269"><a href="#cb10-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-270"><a href="#cb10-270" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb10-271"><a href="#cb10-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-272"><a href="#cb10-272" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> titles_info</span>
<span id="cb10-273"><a href="#cb10-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-274"><a href="#cb10-274" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convert_to_dataframe(titles_info, ArgDown):</span>
<span id="cb10-275"><a href="#cb10-275" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-276"><a href="#cb10-276" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert the titles information dictionary to a pandas DataFrame.</span></span>
<span id="cb10-277"><a href="#cb10-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-278"><a href="#cb10-278" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-279"><a href="#cb10-279" aria-hidden="true" tabindex="-1"></a><span class="co">        titles_info (dict): Dictionary with information about titles</span></span>
<span id="cb10-280"><a href="#cb10-280" aria-hidden="true" tabindex="-1"></a><span class="co">        ArgDown (bool): If True, extract only structural information without probabilities</span></span>
<span id="cb10-281"><a href="#cb10-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-282"><a href="#cb10-282" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-283"><a href="#cb10-283" aria-hidden="true" tabindex="-1"></a><span class="co">        pandas.DataFrame: Structured data with node information and relationships</span></span>
<span id="cb10-284"><a href="#cb10-284" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-285"><a href="#cb10-285" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ArgDown <span class="op">==</span> <span class="va">True</span>:</span>
<span id="cb10-286"><a href="#cb10-286" aria-hidden="true" tabindex="-1"></a>        <span class="co"># For ArgDown, exclude probability columns</span></span>
<span id="cb10-287"><a href="#cb10-287" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> pd.DataFrame(columns<span class="op">=</span>[<span class="st">'Title'</span>, <span class="st">'Description'</span>, <span class="st">'line'</span>, <span class="st">'line_numbers'</span>, <span class="st">'indentation'</span>,</span>
<span id="cb10-288"><a href="#cb10-288" aria-hidden="true" tabindex="-1"></a>                               <span class="st">'indentation_levels'</span>, <span class="st">'Parents'</span>, <span class="st">'Children'</span>, <span class="st">'instantiations'</span>])</span>
<span id="cb10-289"><a href="#cb10-289" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb10-290"><a href="#cb10-290" aria-hidden="true" tabindex="-1"></a>        <span class="co"># For BayesDown, include probability columns</span></span>
<span id="cb10-291"><a href="#cb10-291" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> pd.DataFrame(columns<span class="op">=</span>[<span class="st">'Title'</span>, <span class="st">'Description'</span>, <span class="st">'line'</span>, <span class="st">'line_numbers'</span>, <span class="st">'indentation'</span>,</span>
<span id="cb10-292"><a href="#cb10-292" aria-hidden="true" tabindex="-1"></a>                               <span class="st">'indentation_levels'</span>, <span class="st">'Parents'</span>, <span class="st">'Children'</span>, <span class="st">'instantiations'</span>,</span>
<span id="cb10-293"><a href="#cb10-293" aria-hidden="true" tabindex="-1"></a>                               <span class="st">'priors'</span>, <span class="st">'posteriors'</span>])</span>
<span id="cb10-294"><a href="#cb10-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-295"><a href="#cb10-295" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> title, info <span class="kw">in</span> titles_info.items():</span>
<span id="cb10-296"><a href="#cb10-296" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Parse the metadata JSON string into a Python dictionary</span></span>
<span id="cb10-297"><a href="#cb10-297" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'metadata'</span> <span class="kw">in</span> info <span class="kw">and</span> info[<span class="st">'metadata'</span>]:</span>
<span id="cb10-298"><a href="#cb10-298" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb10-299"><a href="#cb10-299" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Only try to parse if metadata is not empty</span></span>
<span id="cb10-300"><a href="#cb10-300" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> info[<span class="st">'metadata'</span>].strip():</span>
<span id="cb10-301"><a href="#cb10-301" aria-hidden="true" tabindex="-1"></a>                    jsonMetadata <span class="op">=</span> json.loads(info[<span class="st">'metadata'</span>])</span>
<span id="cb10-302"><a href="#cb10-302" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> ArgDown <span class="op">==</span> <span class="va">True</span>:</span>
<span id="cb10-303"><a href="#cb10-303" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># Create the row dictionary with instantiations as</span></span>
<span id="cb10-304"><a href="#cb10-304" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># metadata only, no probabilities yet</span></span>
<span id="cb10-305"><a href="#cb10-305" aria-hidden="true" tabindex="-1"></a>                        row <span class="op">=</span> {</span>
<span id="cb10-306"><a href="#cb10-306" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Title'</span>: title,</span>
<span id="cb10-307"><a href="#cb10-307" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Description'</span>: info.get(<span class="st">'description'</span>, <span class="st">''</span>),</span>
<span id="cb10-308"><a href="#cb10-308" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'line'</span>: info.get(<span class="st">'line'</span>,<span class="st">''</span>),</span>
<span id="cb10-309"><a href="#cb10-309" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'line_numbers'</span>: info.get(<span class="st">'line_numbers'</span>, []),</span>
<span id="cb10-310"><a href="#cb10-310" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'indentation'</span>: info.get(<span class="st">'indentation'</span>,<span class="st">''</span>),</span>
<span id="cb10-311"><a href="#cb10-311" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'indentation_levels'</span>: info.get(<span class="st">'indentation_levels'</span>, []),</span>
<span id="cb10-312"><a href="#cb10-312" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Parents'</span>: info.get(<span class="st">'parents'</span>, []),</span>
<span id="cb10-313"><a href="#cb10-313" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Children'</span>: info.get(<span class="st">'children'</span>, []),</span>
<span id="cb10-314"><a href="#cb10-314" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># Extract specific metadata fields,</span></span>
<span id="cb10-315"><a href="#cb10-315" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># defaulting to empty if not present</span></span>
<span id="cb10-316"><a href="#cb10-316" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'instantiations'</span>: jsonMetadata.get(<span class="st">'instantiations'</span>, []),</span>
<span id="cb10-317"><a href="#cb10-317" aria-hidden="true" tabindex="-1"></a>                        }</span>
<span id="cb10-318"><a href="#cb10-318" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">else</span>:</span>
<span id="cb10-319"><a href="#cb10-319" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># Create dict with probabilities for BayesDown</span></span>
<span id="cb10-320"><a href="#cb10-320" aria-hidden="true" tabindex="-1"></a>                        row <span class="op">=</span> {</span>
<span id="cb10-321"><a href="#cb10-321" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Title'</span>: title,</span>
<span id="cb10-322"><a href="#cb10-322" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Description'</span>: info.get(<span class="st">'description'</span>, <span class="st">''</span>),</span>
<span id="cb10-323"><a href="#cb10-323" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'line'</span>: info.get(<span class="st">'line'</span>,<span class="st">''</span>),</span>
<span id="cb10-324"><a href="#cb10-324" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'line_numbers'</span>: info.get(<span class="st">'line_numbers'</span>, []),</span>
<span id="cb10-325"><a href="#cb10-325" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'indentation'</span>: info.get(<span class="st">'indentation'</span>,<span class="st">''</span>),</span>
<span id="cb10-326"><a href="#cb10-326" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'indentation_levels'</span>: info.get(<span class="st">'indentation_levels'</span>, []),</span>
<span id="cb10-327"><a href="#cb10-327" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Parents'</span>: info.get(<span class="st">'parents'</span>, []),</span>
<span id="cb10-328"><a href="#cb10-328" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'Children'</span>: info.get(<span class="st">'children'</span>, []),</span>
<span id="cb10-329"><a href="#cb10-329" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># Extract specific metadata fields, defaulting to empty if not present</span></span>
<span id="cb10-330"><a href="#cb10-330" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'instantiations'</span>: jsonMetadata.get(<span class="st">'instantiations'</span>, []),</span>
<span id="cb10-331"><a href="#cb10-331" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'priors'</span>: jsonMetadata.get(<span class="st">'priors'</span>, {}),</span>
<span id="cb10-332"><a href="#cb10-332" aria-hidden="true" tabindex="-1"></a>                            <span class="st">'posteriors'</span>: jsonMetadata.get(<span class="st">'posteriors'</span>, {})</span>
<span id="cb10-333"><a href="#cb10-333" aria-hidden="true" tabindex="-1"></a>                        }</span>
<span id="cb10-334"><a href="#cb10-334" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span>:</span>
<span id="cb10-335"><a href="#cb10-335" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># Empty metadata case</span></span>
<span id="cb10-336"><a href="#cb10-336" aria-hidden="true" tabindex="-1"></a>                    row <span class="op">=</span> {</span>
<span id="cb10-337"><a href="#cb10-337" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'Title'</span>: title,</span>
<span id="cb10-338"><a href="#cb10-338" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'Description'</span>: info.get(<span class="st">'description'</span>, <span class="st">''</span>),</span>
<span id="cb10-339"><a href="#cb10-339" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'line'</span>: info.get(<span class="st">'line'</span>,<span class="st">''</span>),</span>
<span id="cb10-340"><a href="#cb10-340" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'line_numbers'</span>: info.get(<span class="st">'line_numbers'</span>, []),</span>
<span id="cb10-341"><a href="#cb10-341" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'indentation'</span>: info.get(<span class="st">'indentation'</span>,<span class="st">''</span>),</span>
<span id="cb10-342"><a href="#cb10-342" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'indentation_levels'</span>: info.get(<span class="st">'indentation_levels'</span>, []),</span>
<span id="cb10-343"><a href="#cb10-343" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'Parents'</span>: info.get(<span class="st">'parents'</span>, []),</span>
<span id="cb10-344"><a href="#cb10-344" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'Children'</span>: info.get(<span class="st">'children'</span>, []),</span>
<span id="cb10-345"><a href="#cb10-345" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'instantiations'</span>: [],</span>
<span id="cb10-346"><a href="#cb10-346" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'priors'</span>: {},</span>
<span id="cb10-347"><a href="#cb10-347" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'posteriors'</span>: {}</span>
<span id="cb10-348"><a href="#cb10-348" aria-hidden="true" tabindex="-1"></a>                    }</span>
<span id="cb10-349"><a href="#cb10-349" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> json.JSONDecodeError:</span>
<span id="cb10-350"><a href="#cb10-350" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Handle case where metadata isn't valid JSON</span></span>
<span id="cb10-351"><a href="#cb10-351" aria-hidden="true" tabindex="-1"></a>                row <span class="op">=</span> {</span>
<span id="cb10-352"><a href="#cb10-352" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Title'</span>: title,</span>
<span id="cb10-353"><a href="#cb10-353" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Description'</span>: info.get(<span class="st">'description'</span>, <span class="st">''</span>),</span>
<span id="cb10-354"><a href="#cb10-354" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'line'</span>: info.get(<span class="st">'line'</span>,<span class="st">''</span>),</span>
<span id="cb10-355"><a href="#cb10-355" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'line_numbers'</span>: info.get(<span class="st">'line_numbers'</span>, []),</span>
<span id="cb10-356"><a href="#cb10-356" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'indentation'</span>: info.get(<span class="st">'indentation'</span>,<span class="st">''</span>),</span>
<span id="cb10-357"><a href="#cb10-357" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'indentation_levels'</span>: info.get(<span class="st">'indentation_levels'</span>, []),</span>
<span id="cb10-358"><a href="#cb10-358" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Parents'</span>: info.get(<span class="st">'parents'</span>, []),</span>
<span id="cb10-359"><a href="#cb10-359" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Children'</span>: info.get(<span class="st">'children'</span>, []),</span>
<span id="cb10-360"><a href="#cb10-360" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'instantiations'</span>: [],</span>
<span id="cb10-361"><a href="#cb10-361" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'priors'</span>: {},</span>
<span id="cb10-362"><a href="#cb10-362" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'posteriors'</span>: {}</span>
<span id="cb10-363"><a href="#cb10-363" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb10-364"><a href="#cb10-364" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb10-365"><a href="#cb10-365" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Handle case where metadata field doesn't exist or is empty</span></span>
<span id="cb10-366"><a href="#cb10-366" aria-hidden="true" tabindex="-1"></a>            row <span class="op">=</span> {</span>
<span id="cb10-367"><a href="#cb10-367" aria-hidden="true" tabindex="-1"></a>                <span class="st">'Title'</span>: title,</span>
<span id="cb10-368"><a href="#cb10-368" aria-hidden="true" tabindex="-1"></a>                <span class="st">'Description'</span>: info.get(<span class="st">'description'</span>, <span class="st">''</span>),</span>
<span id="cb10-369"><a href="#cb10-369" aria-hidden="true" tabindex="-1"></a>                <span class="st">'line'</span>: info.get(<span class="st">'line'</span>,<span class="st">''</span>),</span>
<span id="cb10-370"><a href="#cb10-370" aria-hidden="true" tabindex="-1"></a>                <span class="st">'line_numbers'</span>: info.get(<span class="st">'line_numbers'</span>, []),</span>
<span id="cb10-371"><a href="#cb10-371" aria-hidden="true" tabindex="-1"></a>                <span class="st">'indentation'</span>: info.get(<span class="st">'indentation'</span>,<span class="st">''</span>),</span>
<span id="cb10-372"><a href="#cb10-372" aria-hidden="true" tabindex="-1"></a>                <span class="st">'indentation_levels'</span>: info.get(<span class="st">'indentation_levels'</span>, []),</span>
<span id="cb10-373"><a href="#cb10-373" aria-hidden="true" tabindex="-1"></a>                <span class="st">'Parents'</span>: info.get(<span class="st">'parents'</span>, []),</span>
<span id="cb10-374"><a href="#cb10-374" aria-hidden="true" tabindex="-1"></a>                <span class="st">'Children'</span>: info.get(<span class="st">'children'</span>, []),</span>
<span id="cb10-375"><a href="#cb10-375" aria-hidden="true" tabindex="-1"></a>                <span class="st">'instantiations'</span>: [],</span>
<span id="cb10-376"><a href="#cb10-376" aria-hidden="true" tabindex="-1"></a>                <span class="st">'priors'</span>: {},</span>
<span id="cb10-377"><a href="#cb10-377" aria-hidden="true" tabindex="-1"></a>                <span class="st">'posteriors'</span>: {}</span>
<span id="cb10-378"><a href="#cb10-378" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-379"><a href="#cb10-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-380"><a href="#cb10-380" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add the row to the DataFrame</span></span>
<span id="cb10-381"><a href="#cb10-381" aria-hidden="true" tabindex="-1"></a>        df.loc[<span class="bu">len</span>(df)] <span class="op">=</span> row</span>
<span id="cb10-382"><a href="#cb10-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-383"><a href="#cb10-383" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb10-384"><a href="#cb10-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-385"><a href="#cb10-385" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_no_parent_no_child_columns_to_df(dataframe):</span>
<span id="cb10-386"><a href="#cb10-386" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-387"><a href="#cb10-387" aria-hidden="true" tabindex="-1"></a><span class="co">    Add No_Parent and No_Children boolean columns to the DataFrame to</span></span>
<span id="cb10-388"><a href="#cb10-388" aria-hidden="true" tabindex="-1"></a><span class="co">    identify root and leaf nodes.</span></span>
<span id="cb10-389"><a href="#cb10-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-390"><a href="#cb10-390" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-391"><a href="#cb10-391" aria-hidden="true" tabindex="-1"></a><span class="co">        dataframe (pandas.DataFrame): The DataFrame to enhance</span></span>
<span id="cb10-392"><a href="#cb10-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-393"><a href="#cb10-393" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-394"><a href="#cb10-394" aria-hidden="true" tabindex="-1"></a><span class="co">        pandas.DataFrame: Enhanced DataFrame with additional boolean columns</span></span>
<span id="cb10-395"><a href="#cb10-395" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-396"><a href="#cb10-396" aria-hidden="true" tabindex="-1"></a>    no_parent <span class="op">=</span> []</span>
<span id="cb10-397"><a href="#cb10-397" aria-hidden="true" tabindex="-1"></a>    no_children <span class="op">=</span> []</span>
<span id="cb10-398"><a href="#cb10-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-399"><a href="#cb10-399" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, row <span class="kw">in</span> dataframe.iterrows():</span>
<span id="cb10-400"><a href="#cb10-400" aria-hidden="true" tabindex="-1"></a>        no_parent.append(<span class="kw">not</span> row[<span class="st">'Parents'</span>])  <span class="co"># True if Parents list is empty</span></span>
<span id="cb10-401"><a href="#cb10-401" aria-hidden="true" tabindex="-1"></a>        no_children.append(<span class="kw">not</span> row[<span class="st">'Children'</span>])  <span class="co"># True if Children list is empty</span></span>
<span id="cb10-402"><a href="#cb10-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-403"><a href="#cb10-403" aria-hidden="true" tabindex="-1"></a>    dataframe[<span class="st">'No_Parent'</span>] <span class="op">=</span> no_parent</span>
<span id="cb10-404"><a href="#cb10-404" aria-hidden="true" tabindex="-1"></a>    dataframe[<span class="st">'No_Children'</span>] <span class="op">=</span> no_children</span>
<span id="cb10-405"><a href="#cb10-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-406"><a href="#cb10-406" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dataframe</span>
<span id="cb10-407"><a href="#cb10-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-408"><a href="#cb10-408" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_parents_instantiation_columns_to_df(dataframe):</span>
<span id="cb10-409"><a href="#cb10-409" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-410"><a href="#cb10-410" aria-hidden="true" tabindex="-1"></a><span class="co">    Add all possible instantiations of parents as a list of lists column</span></span>
<span id="cb10-411"><a href="#cb10-411" aria-hidden="true" tabindex="-1"></a><span class="co">    to the DataFrame.</span></span>
<span id="cb10-412"><a href="#cb10-412" aria-hidden="true" tabindex="-1"></a><span class="co">    This is crucial for generating conditional probability tables.</span></span>
<span id="cb10-413"><a href="#cb10-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-414"><a href="#cb10-414" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-415"><a href="#cb10-415" aria-hidden="true" tabindex="-1"></a><span class="co">        dataframe (pandas.DataFrame): The DataFrame to enhance</span></span>
<span id="cb10-416"><a href="#cb10-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-417"><a href="#cb10-417" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-418"><a href="#cb10-418" aria-hidden="true" tabindex="-1"></a><span class="co">        pandas.DataFrame: Enhanced DataFrame with parent_instantiations column</span></span>
<span id="cb10-419"><a href="#cb10-419" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-420"><a href="#cb10-420" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a new column to store parent instantiations</span></span>
<span id="cb10-421"><a href="#cb10-421" aria-hidden="true" tabindex="-1"></a>    parent_instantiations <span class="op">=</span> []</span>
<span id="cb10-422"><a href="#cb10-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-423"><a href="#cb10-423" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iterate through each row in the dataframe</span></span>
<span id="cb10-424"><a href="#cb10-424" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, row <span class="kw">in</span> dataframe.iterrows():</span>
<span id="cb10-425"><a href="#cb10-425" aria-hidden="true" tabindex="-1"></a>        parents <span class="op">=</span> row[<span class="st">'Parents'</span>]</span>
<span id="cb10-426"><a href="#cb10-426" aria-hidden="true" tabindex="-1"></a>        parent_insts <span class="op">=</span> []</span>
<span id="cb10-427"><a href="#cb10-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-428"><a href="#cb10-428" aria-hidden="true" tabindex="-1"></a>        <span class="co"># For each parent, find its instantiations and add to the list</span></span>
<span id="cb10-429"><a href="#cb10-429" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> parent <span class="kw">in</span> parents:</span>
<span id="cb10-430"><a href="#cb10-430" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Find the row where Title matches the parent</span></span>
<span id="cb10-431"><a href="#cb10-431" aria-hidden="true" tabindex="-1"></a>            parent_row <span class="op">=</span> dataframe[dataframe[<span class="st">'Title'</span>] <span class="op">==</span> parent]</span>
<span id="cb10-432"><a href="#cb10-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-433"><a href="#cb10-433" aria-hidden="true" tabindex="-1"></a>            <span class="co"># If parent found in the dataframe</span></span>
<span id="cb10-434"><a href="#cb10-434" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> parent_row.empty:</span>
<span id="cb10-435"><a href="#cb10-435" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Get the instantiations of this parent</span></span>
<span id="cb10-436"><a href="#cb10-436" aria-hidden="true" tabindex="-1"></a>                parent_instantiation <span class="op">=</span> parent_row[<span class="st">'instantiations'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb10-437"><a href="#cb10-437" aria-hidden="true" tabindex="-1"></a>                parent_insts.append(parent_instantiation)</span>
<span id="cb10-438"><a href="#cb10-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-439"><a href="#cb10-439" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add the list of parent instantiations to our new column</span></span>
<span id="cb10-440"><a href="#cb10-440" aria-hidden="true" tabindex="-1"></a>        parent_instantiations.append(parent_insts)</span>
<span id="cb10-441"><a href="#cb10-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-442"><a href="#cb10-442" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add the new column to the dataframe</span></span>
<span id="cb10-443"><a href="#cb10-443" aria-hidden="true" tabindex="-1"></a>    dataframe[<span class="st">'parent_instantiations'</span>] <span class="op">=</span> parent_instantiations</span>
<span id="cb10-444"><a href="#cb10-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-445"><a href="#cb10-445" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dataframe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<!-- 
#| label: parsing_argdown_bayesdown
#| echo: true
#| eval: true
#| fig-cap: "Parsing ArgDown & BayesDown"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=LTDQOBd7COIm&line=8&uniqifier=1"
#| fig-alt: "Parsing ArgDown & BayesDown"
-->
<p>The structure revealed insights. “Misaligned_Power_Seeking” emerged as a critical hub, influenced by multiple factors and influencing multiple outcomes. The pathway from incentives through deployment to risk became explicit.</p>
<!-- [-] COMPLETED: Added extraction details -->
</section>
</section>
<section id="sec-carlsmith-bayesdown" class="level3">
<h3 class="anchored" data-anchor-id="sec-carlsmith-bayesdown">3.5.3 From ArgDown to BayesDown in Carlsmith’s Model</h3>
<p>Adding probabilities to Carlsmith’s structure presented unique challenges. Unlike rain-sprinkler probabilities that have intuitive values, what’s the probability of “mesa-optimization” or “deceptive alignment”?</p>
<p>The system generated over 100 probability questions for the full model. <!-- 
```markdown
For [Deployment_Decisions]:
- What is P(deploy)?
- What is P(deploy|strong_incentives, deception)?
- What is P(deploy|strong_incentives, no_deception)?
- What is P(deploy|weak_incentives, deception)?
- What is P(deploy|weak_incentives, no_deception)?
``` --></p>
<p>Each question targets a specific parameter needed for the Bayesian network. The conditional structure reflects Carlsmith’s argument—deployment depends on both incentives (external pressure) and deception (hidden misalignment).</p>
<p>The LLM extraction drew on Carlsmith’s explicit estimates where available and inferred reasonable values elsewhere. The result captured both the structure and Carlsmith’s quantitative risk assessment:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="er">Deployment_Decisions</span><span class="ot">]</span><span class="er">:</span> <span class="er">Decisions</span> <span class="er">to</span> <span class="er">deploy</span> <span class="er">potentially</span> <span class="er">misaligned</span> <span class="er">AI</span> <span class="er">systems.</span> <span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"deployment_decisions_DEPLOY"</span><span class="ot">,</span> <span class="st">"deployment_decisions_WITHHOLD"</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(deployment_decisions_DEPLOY)"</span><span class="fu">:</span> <span class="st">"0.70"</span><span class="fu">,</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(deployment_decisions_WITHHOLD)"</span><span class="fu">:</span> <span class="st">"0.30"</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(deployment_decisions_DEPLOY|incentives_to_build_aps_STRONG, deception_by_ai_TRUE)"</span><span class="fu">:</span> <span class="st">"0.90"</span><span class="fu">,</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(deployment_decisions_DEPLOY|incentives_to_build_aps_STRONG, deception_by_ai_FALSE)"</span><span class="fu">:</span> <span class="st">"0.75"</span><span class="fu">,</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(deployment_decisions_DEPLOY|incentives_to_build_aps_WEAK, deception_by_ai_TRUE)"</span><span class="fu">:</span> <span class="st">"0.60"</span><span class="fu">,</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(deployment_decisions_DEPLOY|incentives_to_build_aps_WEAK, deception_by_ai_FALSE)"</span><span class="fu">:</span> <span class="st">"0.30"</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- 
```json
[Deployment_Decisions]: Decisions to deploy potentially misaligned AI. {
  "instantiations": ["deploy", "withhold"],
  "priors": {"p(deploy)": "0.70", "p(withhold)": "0.30"},
  "posteriors": {
    "p(deploy|strong_incentives,deception)": "0.90",
    "p(deploy|strong_incentives,no_deception)": "0.75",
    "p(deploy|weak_incentives,deception)": "0.60",
    "p(deploy|weak_incentives,no_deception)": "0.30"
  }
}
```
-->
<!-- [-] COMPLETED: Added BayesDown transformation -->
<p>This node has two possible states (DEPLOY or WITHHOLD), prior probabilities for each state, and conditional probabilities based on different combinations of its parent variables (“Incentives_To_Build_APS” and “Deception_By_AI”). The probabilities tell a plausible story: deployment becomes more likely with stronger incentives and successful deception, but even without deception, strong incentives create substantial deployment probability.</p>
<!-- 
#| label: generate_bayesdown
#| echo: true
#| eval: true
#| fig-cap: "Questions Generated for BayesDown Extraction from Carlsmith model"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=lBLyoERIT557&line=1&uniqifier=1"
#| fig-alt: "Questions Generated for BayesDown Extraction from Carlsmith model"
-->
<p>Along with these questions the following prompt is sent to the LLM:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="er">You</span> <span class="er">are</span> <span class="er">an</span> <span class="er">expert</span> <span class="er">in</span> <span class="er">probabilistic</span> <span class="er">reasoning</span> <span class="er">and</span> <span class="er">Bayesian</span> <span class="er">networks.</span> <span class="er">Your</span> <span class="er">task</span> <span class="er">is</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="er">to</span> <span class="er">extend</span> <span class="er">the</span> <span class="er">provided</span> <span class="er">ArgDown</span> <span class="er">structure</span> <span class="er">with</span> <span class="er">probability</span> <span class="er">information,</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="er">creating</span> <span class="er">a</span> <span class="er">BayesDown</span> <span class="er">representation.</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="er">For</span> <span class="er">each</span> <span class="er">statement</span> <span class="er">in</span> <span class="er">the</span> <span class="er">ArgDown</span> <span class="er">structure,</span> <span class="er">you</span> <span class="er">need</span> <span class="er">to:</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="er">1.</span> <span class="er">Estimate</span> <span class="er">prior</span> <span class="er">probabilities</span> <span class="er">for</span> <span class="er">each</span> <span class="er">possible</span> <span class="er">state</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="er">2.</span> <span class="er">Estimate</span> <span class="er">conditional</span> <span class="er">probabilities</span> <span class="er">given</span> <span class="er">parent</span> <span class="er">states</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="er">3.</span> <span class="er">Maintain</span> <span class="er">the</span> <span class="er">original</span> <span class="er">structure</span> <span class="er">and</span> <span class="er">relationships</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="er">Here</span> <span class="er">is</span> <span class="er">the</span> <span class="er">format</span> <span class="er">to</span> <span class="er">follow:</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="er">Node</span><span class="ot">]</span><span class="er">:</span> <span class="er">Description.</span> <span class="fu">{</span> <span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"node_TRUE"</span><span class="ot">,</span> <span class="st">"node_FALSE"</span><span class="ot">]</span><span class="fu">,</span> <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">"p(node_TRUE)"</span><span class="fu">:</span> <span class="st">"0.7"</span><span class="fu">,</span> <span class="dt">"p(node_FALSE)"</span><span class="fu">:</span> <span class="st">"0.3"</span> <span class="fu">},</span> <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">"p(node_TRUE|parent_TRUE)"</span><span class="fu">:</span> <span class="st">"0.9"</span><span class="fu">,</span> <span class="dt">"p(node_TRUE|parent_FALSE)"</span><span class="fu">:</span> <span class="st">"0.4"</span><span class="fu">,</span> <span class="dt">"p(node_FALSE|parent_TRUE)"</span><span class="fu">:</span> <span class="st">"0.1"</span><span class="fu">,</span> <span class="dt">"p(node_FALSE|parent_FALSE)"</span><span class="fu">:</span> <span class="st">"0.6"</span> <span class="fu">}</span> <span class="fu">}</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a> <span class="ot">[</span><span class="er">Parent</span><span class="ot">]</span><span class="er">:</span> <span class="er">Parent</span> <span class="er">description.</span> <span class="fu">{</span><span class="er">...</span><span class="fu">}</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="er">Here</span> <span class="er">are</span> <span class="er">the</span> <span class="er">specific</span> <span class="er">probability</span> <span class="er">questions</span> <span class="er">to</span> <span class="er">answer:</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="er">$questions</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="er">ArgDown</span> <span class="er">structure</span> <span class="er">to</span> <span class="er">enhance:</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="er">$argdown</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="er">Provide</span> <span class="er">the</span> <span class="er">complete</span> <span class="er">BayesDown</span> <span class="er">representation</span> <span class="er">with</span> <span class="er">probabilities:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="example-bayesdown-excerpt-from-the-carlsmith-model" class="level4">
<h4 class="anchored" data-anchor-id="example-bayesdown-excerpt-from-the-carlsmith-model">Example BayesDown Excerpt from the Carlsmith model</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="er">#|</span> <span class="er">label:</span> <span class="er">json_carlsmith_excerpt</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="er">#|</span> <span class="er">echo:</span> <span class="er">true</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="er">#|</span> <span class="er">eval:</span> <span class="er">true</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="er">#|</span> <span class="er">fig-cap:</span> <span class="er">"Example</span> <span class="er">BayesDown</span> <span class="er">Excerpt</span> <span class="er">from</span> <span class="er">the</span> <span class="er">Carlsmith</span> <span class="er">model"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="er">#|</span> <span class="er">fig-link:</span> <span class="er">"https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=AFnu_1Ludahi"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="er">#|</span> <span class="er">fig-alt:</span> <span class="er">"Example</span> <span class="er">BayesDown</span> <span class="er">Excerpt</span> <span class="er">from</span> <span class="er">the</span> <span class="er">Carlsmith</span> <span class="er">model"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="er">Existential_Catastrophe</span><span class="ot">]</span><span class="er">:</span> <span class="er">The</span> <span class="er">destruction</span> <span class="er">of</span> <span class="er">humanity's</span> <span class="er">long-term</span> <span class="er">potential</span> <span class="er">due</span> <span class="er">to</span> <span class="er">AI</span> <span class="er">systems</span> <span class="er">we've</span> <span class="er">lost</span> <span class="er">control</span> <span class="er">over.</span> <span class="fu">{</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"existential_catastrophe_TRUE"</span><span class="ot">,</span> <span class="st">"existential_catastrophe_FALSE"</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"p(existential_catastrophe_TRUE)"</span><span class="fu">:</span> <span class="st">"0.05"</span><span class="fu">,</span> <span class="dt">"p(existential_catastrophe_FALSE)"</span><span class="fu">:</span> <span class="st">"0.95"</span><span class="fu">},</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(existential_catastrophe_TRUE|human_disempowerment_TRUE)"</span><span class="fu">:</span> <span class="st">"0.95"</span><span class="fu">,</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"p(existential_catastrophe_TRUE|human_disempowerment_FALSE)"</span><span class="fu">:</span> <span class="st">"0.0"</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a> <span class="er">+</span> <span class="ot">[</span><span class="er">Human_Disempowerment</span><span class="ot">]</span><span class="er">:</span> <span class="er">Permanent</span> <span class="er">and</span> <span class="er">collective</span> <span class="er">disempowerment</span> <span class="er">of</span> <span class="er">humanity</span> <span class="er">relative</span> <span class="er">to</span> <span class="er">AI</span> <span class="er">systems.</span> <span class="fu">{</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>   <span class="dt">"instantiations"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"human_disempowerment_TRUE"</span><span class="ot">,</span> <span class="st">"human_disempowerment_FALSE"</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>   <span class="dt">"priors"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"p(human_disempowerment_TRUE)"</span><span class="fu">:</span> <span class="st">"0.208"</span><span class="fu">,</span> <span class="dt">"p(human_disempowerment_FALSE)"</span><span class="fu">:</span> <span class="st">"0.792"</span><span class="fu">},</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>   <span class="dt">"posteriors"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>     <span class="dt">"p(human_disempowerment_TRUE|scale_of_power_seeking_TRUE)"</span><span class="fu">:</span> <span class="st">"1.0"</span><span class="fu">,</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>     <span class="dt">"p(human_disempowerment_TRUE|scale_of_power_seeking_FALSE)"</span><span class="fu">:</span> <span class="st">"0.0"</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">}</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a> <span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This excerpt from the Carlsmith model representation illustrates how BayesDown preserves both the narrative description (“The destruction of humanity’s long-term potential…”) and the precise probability judgments. Someone without technical background can still understand the core claims and their relationships, while someone seeking quantitative precision can find exact probability values.</p>
<p>The format supports multiple levels of engagement. At the most basic level, readers can follow the hierarchical structure to understand causal relationships between factors. At an intermediate level, they can examine probability judgments to assess the strength of different influences. At the most technical level, they can analyze the complete probabilistic model to perform inference and sensitivity analysis.</p>
</section>
</section>
<section id="sec-practically-meaningful" class="level3">
<h3 class="anchored" data-anchor-id="sec-practically-meaningful">3.5.4 Practically Meaningful BayesDown</h3>
<p>The BayesDown representation achieves something remarkable: it bridges the chasm between Carlsmith’s nuanced prose and mathematical formalism without losing the essence of either.</p>
<p>Consider what this bridge enables:</p>
<p><strong>For Technical Researchers</strong>: The formal structure makes assumptions explicit. Is power-seeking really independent of capability level given strategic awareness? The model forces clarity.</p>
<p><strong>For Policymakers</strong>: Probabilities attached to comprehensible descriptions provide actionable intelligence. “70% chance of deployment despite misalignment” translates better than abstract concerns.</p>
<p><strong>For Strategic Analysts</strong>: The network structure reveals intervention points. Which nodes, if changed, most affect the final outcome? Where should we focus effort?</p>
<p>The hybrid nature—natural language plus formal structure plus probabilities—serves each audience while enabling communication between them. A policymaker can understand “deployment decisions” without probability theory. A researcher can analyze the mathematical model without losing sight of what the variables mean.</p>
<p>This isn’t just convenient—it’s essential for coordination. When different communities can refer to the same model but engage with it at their appropriate level of technical detail, we create common ground for productive disagreement and collaborative problem-solving.</p>
<!-- [-] COMPLETED: Added practical meaning -->
</section>
<section id="sec-interactive-visualization" class="level3">
<h3 class="anchored" data-anchor-id="sec-interactive-visualization">3.5.5 Interactive Visualization and Exploration</h3>
<p>The moment when Carlsmith’s model first rendered as an interactive network felt like putting on glasses after years of squinting. Suddenly, the complex web of relationships became navigable.</p>
<p>The visualization system employs multiple visual channels simultaneously:</p>
<p><strong>Color Coding</strong>: Nodes shift from deep red (low probability) through yellow to bright green (high probability). At a glance, you see which factors Carlsmith considers likely versus speculative.</p>
<p><strong>Border Styling</strong>: Blue borders mark root causes (like “Incentives_To_Build”), purple indicates intermediate nodes, magenta highlights final outcomes. The visual grammar guides the eye through causal flow.</p>
<p><strong>Layout Algorithm</strong>: Initial placement uses causal depth—root causes at bottom, final outcomes at top. Physics simulation then refines positions to minimize edge crossings while preserving hierarchical structure.</p>
<p><strong>Progressive Disclosure</strong>: Hovering reveals probability summaries. Clicking opens detailed conditional probability tables. Dragging allows custom arrangement. Each interaction level serves different analytical needs.</p>
<p>The figure below shows the interactive visualization of Carlsmith’s model, highlighting how color, border styling, and layout work together to represent complex causal relationships:</p>
<div class="quarto-embed-nb-cell" data-notebook="/Users/vjm/Library/Mobile Documents/iCloud~md~obsidian/Documents/Vaulty/2_DoingGood/Studies/P&amp;E/Specializations/Test_Sync_MAThesis/submission/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb" data-notebook-title="[AMTAIR Prototype Demonstration (Public Colab Notebook)](https://colab.research.google.com/github/SingularitySmith/AMTAIR_Prototype/blob/main/version_history/AMTAIR_Prototype_0_1.3.ipynb#scrollTo=lt8-AnebGUXr)" data-notebook-cellid="cell-main_visualization_function">
<div id="main_visualization_function" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># @title 4.4.0 --- Main Visualization Function --- [main_visualization_function]</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_bayesian_network_with_probabilities(df):</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Create an interactive Bayesian network visualization with enhanced</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">    probability visualization and node classification based on network structure.</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a directed graph</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    G <span class="op">=</span> nx.DiGraph()</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add nodes with proper attributes</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> row[<span class="st">'Title'</span>]</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        description <span class="op">=</span> row[<span class="st">'Description'</span>]</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Process probability information</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>        priors <span class="op">=</span> get_priors(row)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        instantiations <span class="op">=</span> get_instantiations(row)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add node with base information</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        G.add_node(</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>            title,</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>            description<span class="op">=</span>description,</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>            priors<span class="op">=</span>priors,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>            instantiations<span class="op">=</span>instantiations,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>            posteriors<span class="op">=</span>get_posteriors(row)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add edges</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>        child <span class="op">=</span> row[<span class="st">'Title'</span>]</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>        parents <span class="op">=</span> get_parents(row)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add edges from each parent to this child</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> parent <span class="kw">in</span> parents:</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> parent <span class="kw">in</span> G.nodes():</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>                G.add_edge(parent, child)</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Classify nodes based on network structure</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>    classify_nodes(G)</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create network visualization</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    net <span class="op">=</span> Network(notebook<span class="op">=</span><span class="va">True</span>, directed<span class="op">=</span><span class="va">True</span>, cdn_resources<span class="op">=</span><span class="st">"in_line"</span>, height<span class="op">=</span><span class="st">"600px"</span>, width<span class="op">=</span><span class="st">"100%"</span>)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Configure physics for better layout</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>    net.force_atlas_2based(gravity<span class="op">=-</span><span class="dv">50</span>, spring_length<span class="op">=</span><span class="dv">100</span>, spring_strength<span class="op">=</span><span class="fl">0.02</span>)</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>    net.show_buttons(filter_<span class="op">=</span>[<span class="st">'physics'</span>])</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add the graph to the network</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    net.from_nx(G)</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Enhance node appearance with probability information and classification</span></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> node <span class="kw">in</span> net.nodes:</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>        node_id <span class="op">=</span> node[<span class="st">'id'</span>]</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>        node_data <span class="op">=</span> G.nodes[node_id]</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Get node type and set border color</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>        node_type <span class="op">=</span> node_data.get(<span class="st">'node_type'</span>, <span class="st">'unknown'</span>)</span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>        border_color <span class="op">=</span> get_border_color(node_type)</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Get probability information</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>        priors <span class="op">=</span> node_data.get(<span class="st">'priors'</span>, {})</span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>        true_prob <span class="op">=</span> priors.get(<span class="st">'true_prob'</span>, <span class="fl">0.5</span>) <span class="cf">if</span> priors <span class="cf">else</span> <span class="fl">0.5</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Get proper state names</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>        instantiations <span class="op">=</span> node_data.get(<span class="st">'instantiations'</span>, [<span class="st">"TRUE"</span>, <span class="st">"FALSE"</span>])</span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>        true_state <span class="op">=</span> instantiations[<span class="dv">0</span>] <span class="cf">if</span> <span class="bu">len</span>(instantiations) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"TRUE"</span></span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>        false_state <span class="op">=</span> instantiations[<span class="dv">1</span>] <span class="cf">if</span> <span class="bu">len</span>(instantiations) <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"FALSE"</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create background color based on probability</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>        background_color <span class="op">=</span> get_probability_color(priors)</span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create tooltip with probability information</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>        tooltip <span class="op">=</span> create_tooltip(node_id, node_data)</span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create a simpler node label with probability</span></span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>        simple_label <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>node_id<span class="sc">}</span><span class="ch">\n</span><span class="ss">p=</span><span class="sc">{</span>true_prob<span class="sc">:.2f}</span><span class="ss">"</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Store expanded content as a node attribute for use in click handler</span></span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a>        node_data[<span class="st">'expanded_content'</span>] <span class="op">=</span> create_expanded_content(node_id, node_data)</span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set node attributes</span></span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a>        node[<span class="st">'title'</span>] <span class="op">=</span> tooltip  <span class="co"># Tooltip HTML</span></span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a>        node[<span class="st">'label'</span>] <span class="op">=</span> simple_label  <span class="co"># Simple text label</span></span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a>        node[<span class="st">'shape'</span>] <span class="op">=</span> <span class="st">'box'</span></span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a>        node[<span class="st">'color'</span>] <span class="op">=</span> {</span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a>            <span class="st">'background'</span>: background_color,</span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a>            <span class="st">'border'</span>: border_color,</span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a>            <span class="st">'highlight'</span>: {</span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a>                <span class="st">'background'</span>: background_color,</span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a>                <span class="st">'border'</span>: border_color</span>
<span id="cb14-92"><a href="#cb14-92" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb14-93"><a href="#cb14-93" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb14-94"><a href="#cb14-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-95"><a href="#cb14-95" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set up the click handler with proper data</span></span>
<span id="cb14-96"><a href="#cb14-96" aria-hidden="true" tabindex="-1"></a>    setup_data <span class="op">=</span> {</span>
<span id="cb14-97"><a href="#cb14-97" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nodes_data'</span>: {node_id: {</span>
<span id="cb14-98"><a href="#cb14-98" aria-hidden="true" tabindex="-1"></a>            <span class="st">'expanded_content'</span>: json.dumps(G.nodes[node_id].get(<span class="st">'expanded_content'</span>, <span class="st">''</span>)),</span>
<span id="cb14-99"><a href="#cb14-99" aria-hidden="true" tabindex="-1"></a>            <span class="st">'description'</span>: G.nodes[node_id].get(<span class="st">'description'</span>, <span class="st">''</span>),</span>
<span id="cb14-100"><a href="#cb14-100" aria-hidden="true" tabindex="-1"></a>            <span class="st">'priors'</span>: G.nodes[node_id].get(<span class="st">'priors'</span>, {}),</span>
<span id="cb14-101"><a href="#cb14-101" aria-hidden="true" tabindex="-1"></a>            <span class="st">'posteriors'</span>: G.nodes[node_id].get(<span class="st">'posteriors'</span>, {})</span>
<span id="cb14-102"><a href="#cb14-102" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">for</span> node_id <span class="kw">in</span> G.nodes()}</span>
<span id="cb14-103"><a href="#cb14-103" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-104"><a href="#cb14-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-105"><a href="#cb14-105" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add custom click handling JavaScript</span></span>
<span id="cb14-106"><a href="#cb14-106" aria-hidden="true" tabindex="-1"></a>    click_js <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb14-107"><a href="#cb14-107" aria-hidden="true" tabindex="-1"></a><span class="st">    // Store node data for click handling</span></span>
<span id="cb14-108"><a href="#cb14-108" aria-hidden="true" tabindex="-1"></a><span class="st">    var nodesData = </span><span class="sc">%s</span><span class="st">;</span></span>
<span id="cb14-109"><a href="#cb14-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-110"><a href="#cb14-110" aria-hidden="true" tabindex="-1"></a><span class="st">    // Add event listener for node clicks</span></span>
<span id="cb14-111"><a href="#cb14-111" aria-hidden="true" tabindex="-1"></a><span class="st">    network.on("click", function(params) {</span></span>
<span id="cb14-112"><a href="#cb14-112" aria-hidden="true" tabindex="-1"></a><span class="st">        if (params.nodes.length &gt; 0) {</span></span>
<span id="cb14-113"><a href="#cb14-113" aria-hidden="true" tabindex="-1"></a><span class="st">            var nodeId = params.nodes[0];</span></span>
<span id="cb14-114"><a href="#cb14-114" aria-hidden="true" tabindex="-1"></a><span class="st">            var nodeInfo = nodesData[nodeId];</span></span>
<span id="cb14-115"><a href="#cb14-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-116"><a href="#cb14-116" aria-hidden="true" tabindex="-1"></a><span class="st">            if (nodeInfo) {</span></span>
<span id="cb14-117"><a href="#cb14-117" aria-hidden="true" tabindex="-1"></a><span class="st">                // Create a modal popup for expanded content</span></span>
<span id="cb14-118"><a href="#cb14-118" aria-hidden="true" tabindex="-1"></a><span class="st">                var modal = document.createElement('div');</span></span>
<span id="cb14-119"><a href="#cb14-119" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.position = 'fixed';</span></span>
<span id="cb14-120"><a href="#cb14-120" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.left = '50</span><span class="sc">%%</span><span class="st">';</span></span>
<span id="cb14-121"><a href="#cb14-121" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.top = '50</span><span class="sc">%%</span><span class="st">';</span></span>
<span id="cb14-122"><a href="#cb14-122" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.transform = 'translate(-50</span><span class="sc">%%</span><span class="st">, -50</span><span class="sc">%%</span><span class="st">)';</span></span>
<span id="cb14-123"><a href="#cb14-123" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.backgroundColor = 'white';</span></span>
<span id="cb14-124"><a href="#cb14-124" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.padding = '20px';</span></span>
<span id="cb14-125"><a href="#cb14-125" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.borderRadius = '5px';</span></span>
<span id="cb14-126"><a href="#cb14-126" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.boxShadow = '0 0 10px rgba(0,0,0,0.5)';</span></span>
<span id="cb14-127"><a href="#cb14-127" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.zIndex = '1000';</span></span>
<span id="cb14-128"><a href="#cb14-128" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.maxWidth = '80</span><span class="sc">%%</span><span class="st">';</span></span>
<span id="cb14-129"><a href="#cb14-129" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.maxHeight = '80</span><span class="sc">%%</span><span class="st">';</span></span>
<span id="cb14-130"><a href="#cb14-130" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.style.overflow = 'auto';</span></span>
<span id="cb14-131"><a href="#cb14-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-132"><a href="#cb14-132" aria-hidden="true" tabindex="-1"></a><span class="st">                // Parse the JSON string back to HTML content</span></span>
<span id="cb14-133"><a href="#cb14-133" aria-hidden="true" tabindex="-1"></a><span class="st">                try {</span></span>
<span id="cb14-134"><a href="#cb14-134" aria-hidden="true" tabindex="-1"></a><span class="st">                    var expandedContent = JSON.parse(nodeInfo.expanded_content);</span></span>
<span id="cb14-135"><a href="#cb14-135" aria-hidden="true" tabindex="-1"></a><span class="st">                    modal.innerHTML = expandedContent;</span></span>
<span id="cb14-136"><a href="#cb14-136" aria-hidden="true" tabindex="-1"></a><span class="st">                } catch (e) {</span></span>
<span id="cb14-137"><a href="#cb14-137" aria-hidden="true" tabindex="-1"></a><span class="st">                    modal.innerHTML = 'Error displaying content: ' + e.message;</span></span>
<span id="cb14-138"><a href="#cb14-138" aria-hidden="true" tabindex="-1"></a><span class="st">                }</span></span>
<span id="cb14-139"><a href="#cb14-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-140"><a href="#cb14-140" aria-hidden="true" tabindex="-1"></a><span class="st">                // Add close button</span></span>
<span id="cb14-141"><a href="#cb14-141" aria-hidden="true" tabindex="-1"></a><span class="st">                var closeBtn = document.createElement('button');</span></span>
<span id="cb14-142"><a href="#cb14-142" aria-hidden="true" tabindex="-1"></a><span class="st">                closeBtn.innerHTML = 'Close';</span></span>
<span id="cb14-143"><a href="#cb14-143" aria-hidden="true" tabindex="-1"></a><span class="st">                closeBtn.style.marginTop = '10px';</span></span>
<span id="cb14-144"><a href="#cb14-144" aria-hidden="true" tabindex="-1"></a><span class="st">                closeBtn.style.padding = '5px 10px';</span></span>
<span id="cb14-145"><a href="#cb14-145" aria-hidden="true" tabindex="-1"></a><span class="st">                closeBtn.style.cursor = 'pointer';</span></span>
<span id="cb14-146"><a href="#cb14-146" aria-hidden="true" tabindex="-1"></a><span class="st">                closeBtn.onclick = function() {</span></span>
<span id="cb14-147"><a href="#cb14-147" aria-hidden="true" tabindex="-1"></a><span class="st">                    document.body.removeChild(modal);</span></span>
<span id="cb14-148"><a href="#cb14-148" aria-hidden="true" tabindex="-1"></a><span class="st">                };</span></span>
<span id="cb14-149"><a href="#cb14-149" aria-hidden="true" tabindex="-1"></a><span class="st">                modal.appendChild(closeBtn);</span></span>
<span id="cb14-150"><a href="#cb14-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-151"><a href="#cb14-151" aria-hidden="true" tabindex="-1"></a><span class="st">                // Add modal to body</span></span>
<span id="cb14-152"><a href="#cb14-152" aria-hidden="true" tabindex="-1"></a><span class="st">                document.body.appendChild(modal);</span></span>
<span id="cb14-153"><a href="#cb14-153" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb14-154"><a href="#cb14-154" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb14-155"><a href="#cb14-155" aria-hidden="true" tabindex="-1"></a><span class="st">    });</span></span>
<span id="cb14-156"><a href="#cb14-156" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span> <span class="op">%</span> json.dumps(setup_data[<span class="st">'nodes_data'</span>])</span>
<span id="cb14-157"><a href="#cb14-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-158"><a href="#cb14-158" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Save the graph to HTML</span></span>
<span id="cb14-159"><a href="#cb14-159" aria-hidden="true" tabindex="-1"></a>    html_file <span class="op">=</span> <span class="st">"bayesian_network.html"</span></span>
<span id="cb14-160"><a href="#cb14-160" aria-hidden="true" tabindex="-1"></a>    net.save_graph(html_file)</span>
<span id="cb14-161"><a href="#cb14-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-162"><a href="#cb14-162" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Inject custom click handling into HTML</span></span>
<span id="cb14-163"><a href="#cb14-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb14-164"><a href="#cb14-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(html_file, <span class="st">"r"</span>) <span class="im">as</span> f:</span>
<span id="cb14-165"><a href="#cb14-165" aria-hidden="true" tabindex="-1"></a>            html_content <span class="op">=</span> f.read()</span>
<span id="cb14-166"><a href="#cb14-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-167"><a href="#cb14-167" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Insert click handling script before the closing body tag</span></span>
<span id="cb14-168"><a href="#cb14-168" aria-hidden="true" tabindex="-1"></a>        html_content <span class="op">=</span> html_content.replace(<span class="st">'&lt;/body&gt;'</span>, <span class="ss">f'&lt;script&gt;</span><span class="sc">{</span>click_js<span class="sc">}</span><span class="ss">&lt;/script&gt;&lt;/body&gt;'</span>)</span>
<span id="cb14-169"><a href="#cb14-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-170"><a href="#cb14-170" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Write back the modified HTML</span></span>
<span id="cb14-171"><a href="#cb14-171" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(html_file, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb14-172"><a href="#cb14-172" aria-hidden="true" tabindex="-1"></a>            f.write(html_content)</span>
<span id="cb14-173"><a href="#cb14-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-174"><a href="#cb14-174" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> HTML(html_content)</span>
<span id="cb14-175"><a href="#cb14-175" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb14-176"><a href="#cb14-176" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> HTML(<span class="ss">f"&lt;p&gt;Error rendering HTML: </span><span class="sc">{</span><span class="bu">str</span>(e)<span class="sc">}</span><span class="ss">&lt;/p&gt;"</span></span>
<span id="cb14-177"><a href="#cb14-177" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> <span class="st">"&lt;p&gt;The network visualization has been saved to '</span><span class="sc">{html_file}</span><span class="st">'&lt;/p&gt;"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<!-- 
#| label: main_visualization_function
#| echo: true
#| eval: true
#| fig-cap: "Main Visualization Function"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=7UkPk-bm5_fm&line=8&uniqifier=1"
#| fig-alt: "Main Visualization Function"
-->
<p>The resulting visualization transforms abstract relationships into tangible understanding. Users report “aha” moments when exploring—suddenly seeing how technical factors compound into strategic risks, or identifying previously unnoticed bottlenecks in the causal chain.</p>
<p>This visualization reveals several structural insights:</p>
<ol type="1">
<li><strong>Central importance of “Misaligned_Power_Seeking”</strong> as a hub node with multiple parents and children</li>
<li><strong>Multiple pathways to “Existential_Catastrophe”</strong> through different intermediate factors</li>
<li><strong>Clusters of related variables</strong> forming coherent subarguments (e.g., factors affecting alignment difficulty)</li>
<li><strong>Flow of influence</strong> from technical factors (bottom) through deployment decisions to ultimate outcomes (top)</li>
</ol>
<p>The implementation successfully handles the complexity of Carlsmith’s model, correctly processing the multi-level structure, resolving repeated node references, and calculating appropriate probability distributions. The interactive visualization makes this complex model accessible, allowing users to explore different aspects of the argument through intuitive navigation.</p>
<p>Several key aspects of the implementation were particularly important for handling this complex model:</p>
<ol type="1">
<li><p>The <strong>parent-child relationship detection algorithm</strong> correctly identified hierarchical relationships despite the complex structure with repeated nodes and multiple levels.</p></li>
<li><p>The <strong>probability question generation system</strong> created appropriate questions for all variables, including those with multiple parents requiring factorial combinations of conditional probabilities.</p></li>
<li><p>The <strong>network enhancement functions</strong> calculated useful metrics like centrality measures and Markov blankets that help interpret the model structure.</p></li>
<li><p>The <strong>visualization system</strong> effectively presented the complex network through color-coding, interactive exploration, and progressive disclosure of details.</p></li>
</ol>
<p>The successful application to Carlsmith’s model demonstrates the AMTAIR approach’s scalability to complex real-world arguments. While the canonical rain-sprinkler-lawn example validated correctness, this application proves practical utility for sophisticated multi-level arguments with dozens of variables and complex interdependencies—precisely the kind of arguments that characterize AI risk assessments.</p>
<p>This capability addresses a core limitation of the original MTAIR framework: the labor intensity of manual formalization. Where manually converting Carlsmith’s argument to a formal model might take days of expert time, the AMTAIR approach accomplished this in minutes, creating a foundation for further analysis and exploration.</p>
<!-- [-] COMPLETED: Added visualization details -->
</section>
</div>
<section id="sec-carlsmith-validation" class="level3">
<h3 class="anchored" data-anchor-id="sec-carlsmith-validation">3.5.6 Validation Against Original (From the MTAIR Project)</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite based on results / comparison with Ella and Johannes extractions and by describing what procedures etc. one would ideally follow -->
<p>Validating AMTAIR’s extraction required careful comparison with expert judgment. While comprehensive benchmarking remains future work, preliminary validation efforts provide encouraging signals.</p>
<p><strong>Manual Baseline Creation</strong>: Johannes Meyer and Jelena Meyer, independently extracted ArgDown and BayesDown representations from Carlsmith’s paper and Bucknall and Dori-Hacohen’s. This created ground truth accounting for legitimate interpretive variation—experts might reasonably disagree on some structural choices or probability estimates.</p>
<p><strong>Structural Comparison</strong>: Comparing extracted causal structures revealed high agreement on core relationships. AMTAIR consistently identified the main causal chain from capabilities through deployment to catastrophe. Some variation appeared in handling of auxiliary factors—where one expert might include a minor influence, another might omit it for simplicity.</p>
<p><strong>Probability Assessment</strong>: Probability extraction showed greater variation, reflecting inherent ambiguity in translating qualitative language. When Carlsmith writes “likely,” different readers might reasonably interpret this as 0.7, 0.75, or 0.8. AMTAIR’s extractions fell within the range of expert interpretations, suggesting successful capture of intended meaning even if not identical numbers.</p>
<p><strong>Semantic Preservation</strong>: Most importantly, the formal models preserved the essential insights of Carlsmith’s argument. The critical role of deployment decisions, the compound nature of risk, the importance of technical and strategic factors—all emerged clearly in the extracted representations.</p>
<p>An ideal validation protocol would expand this approach:</p>
<ol type="1">
<li>Multiple expert extractors working independently</li>
<li>Systematic comparison of structural and quantitative agreement</li>
<li>Analysis of where and why extractions diverge</li>
<li>Testing whether different extractions lead to different policy conclusions</li>
<li>Iterative refinement based on identified failure modes</li>
</ol>
<p>The goal isn’t perfect agreement—even human experts disagree. Rather, we seek extractions good enough to support meaningful analysis while acknowledging their limitations.</p>
<!-- [-] COMPLETED: Rewrote validation section without hallucinations -->
</section>
</section>
<section id="sec-validation-methodology" class="level2">
<h2 class="anchored" data-anchor-id="sec-validation-methodology">3.6 Validation Methodology</h2>
<!-- [-] TODO: Present results comparing automated extraction to manual annotation -->
<p>Building trust in automated extraction requires more than anecdotal success<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. We need systematic validation that honestly assesses both capabilities and limitations.</p>
<section id="sec-ground-truth" class="level3">
<h3 class="anchored" data-anchor-id="sec-ground-truth">3.6.1 Ground Truth Construction</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>Creating ground truth for argument extraction poses unique challenges. Unlike named entity recognition or sentiment analysis, argument structure lacks universal standards. What constitutes the “correct” extraction from a complex text?</p>
<p>An ideal validation approach would embrace this inherent subjectivity:</p>
<p><strong>Expert Selection</strong>: Recruit 5-10 domain experts with demonstrated expertise in both AI safety and formal modeling. Diversity matters—include technical researchers, policy analysts, and those with mixed backgrounds.</p>
<p><strong>Extraction Protocol</strong>: Provide standardized training on ArgDown/BayesDown syntax while allowing flexibility in interpretation. Experts work independently to avoid anchoring bias, documenting their reasoning process alongside final extractions.</p>
<p><strong>Consensus Building</strong>: Through structured discussion, identify areas of convergence (likely core argument structure) versus legitimate disagreement (interpretive choices, granularity decisions). This distinguishes system errors from inherent ambiguity.</p>
<p><strong>Quality Metrics</strong>: Rather than binary correct/incorrect judgments, assess:</p>
<ul>
<li>Structural similarity (graph edit distance)</li>
<li>Probability distribution overlap (KL divergence)</li>
<li>Semantic preservation (expert ratings)</li>
<li>Downstream task performance (policy analysis agreement)</li>
</ul>
<p>The resulting dataset would capture not a single “truth” but a distribution of reasonable interpretations against which to evaluate automated extraction.</p>
<!-- [-] COMPLETED: Rewrote ground truth construction -->
</section>
<section id="sec-evaluation-metrics" class="level3">
<h3 class="anchored" data-anchor-id="sec-evaluation-metrics">3.6.2 Evaluation Metrics</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>Evaluating argument extraction requires metrics that capture multiple dimensions of quality:</p>
<p><strong>Structural Fidelity</strong>:</p>
<ul>
<li>Node identification: What fraction of expert-identified variables does the system extract?</li>
<li>Edge accuracy: Are causal relationships preserved?</li>
<li>Hierarchy preservation: Does the system maintain argument levels?</li>
</ul>
<p><strong>Probability Calibration</strong>:</p>
<ul>
<li>Explicit extraction: When sources state probabilities, how accurately are they captured?</li>
<li>Linguistic mapping: Do qualitative expressions translate to reasonable probabilities?</li>
<li>Coherence: Are probability distributions properly normalized?</li>
</ul>
<p><strong>Semantic Quality</strong>:</p>
<ul>
<li>Description accuracy: Do extracted descriptions preserve original meaning?</li>
<li>Terminology preservation: Does the system maintain author’s vocabulary?</li>
<li>Context retention: Is sufficient information preserved for interpretation?</li>
</ul>
<p><strong>Functional Validity</strong>:</p>
<ul>
<li>Inference agreement: Do extracted models support similar conclusions?</li>
<li>Sensitivity preservation: Are critical parameters identified as influential?</li>
<li>Policy robustness: Do different extractions suggest similar interventions?</li>
</ul>
<p>These metrics acknowledge that perfect extraction is neither expected nor necessary. The goal is extraction sufficient for practical use while maintaining transparency about limitations.</p>
<!-- [-] COMPLETED: Rewrote evaluation metrics -->
</section>
<section id="sec-validation-results" class="level3">
<h3 class="anchored" data-anchor-id="sec-validation-results">3.6.3 Results Summary</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>While comprehensive validation remains future work, preliminary assessments using the methodology described above would likely reveal several patterns:</p>
<p><strong>Expected Strengths</strong>: Automated extraction should excel at identifying explicit causal claims, preserving hierarchical argument structure, and extracting stated probabilities. The two-stage approach likely improves quality by allowing focused optimization for each task.</p>
<p><strong>Anticipated Challenges</strong>: Implicit reasoning, complex conditionals, and ambiguous quantifiers would pose greater challenges. Coreference resolution across long documents and maintaining consistency in large models would require continued refinement.</p>
<p><strong>Practical Utility Threshold</strong>: Even with imperfect extraction, the system could provide value if it achieves perhaps 70-80% structural accuracy and captures probability estimates within reasonable ranges. This level of performance would enable rapid initial modeling that experts could refine, dramatically reducing the time from argument to formal model.</p>
<p>The validation framework itself represents a contribution—establishing systematic methods for assessing argument extraction quality as this research area develops.</p>
<!-- [-] COMPLETED: Rewrote results summary -->
</section>
<section id="sec-error-analysis" class="level3">
<h3 class="anchored" data-anchor-id="sec-error-analysis">3.6.4 Error Analysis</h3>
<p>Understanding failure modes guides both appropriate use and future improvements:</p>
<p><strong>Implicit Assumptions</strong>: Authors often leave critical assumptions unstated, relying on shared background knowledge. When an AI safety researcher writes about “alignment,” they assume readers understand the technical concept. The system must either extract these implicit elements or flag their absence.</p>
<p><strong>Complex Conditionals</strong>: Natural language expresses conditionality in myriad ways. “If we achieve alignment (which seems unlikely without major theoretical breakthroughs), then deployment might be safe (assuming robust verification).” Parsing nested, qualified conditionals challenges current methods.</p>
<p><strong>Ambiguous Quantifiers</strong>: The word “significant” might mean 10% in one context, 60% in another. Without calibration to author-specific usage or domain conventions, probability extraction remains approximate.</p>
<p><strong>Coreference Challenges</strong>: Academic writing loves pronouns and indirect references. When “this approach” appears three paragraphs after introducing multiple approaches, identifying the correct referent requires sophisticated discourse understanding.</p>
<p>These limitations don’t invalidate the approach but rather define its boundaries. Users who understand these constraints can work within them, leveraging automation’s strengths while compensating for its weaknesses.</p>
<!-- [-] COMPLETED: Added error analysis -->
</section>
<section id="sec-manual-validation" class="level3">
<h3 class="anchored" data-anchor-id="sec-manual-validation">3.6.5 Independent Manual Extraction Validation</h3>
<!-- [-] ADD: Independent validation through manual extraction comparison -->
<p>To establish ground truth for evaluating AMTAIR’s extraction quality, I obtained independent manual extractions from domain experts. Johannes Meyer and Jelena Meyer<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, both experienced in formal logic and argument analysis, independently extracted ArgDown and BayesDown representations from Bucknall and Dori-Hacohen’s “Current and Near-Term AI as a Potential Existential Risk Factor” <span class="citation" data-cites="bucknall2022">Bucknall and Dori-Hacohen (<a href="../ref/references.html#ref-bucknall2022" role="doc-biblioref">2022</a>)</span>. This paper, which examines how near-term AI systems might contribute to existential risks through various causal pathways, provides an ideal test case due to its explicit discussion of multiple risk factors and their interdependencies.</p>
<p>The manual extraction process revealed patterns consistent with theoretical expectations from the argument mining literature <span class="citation" data-cites="khartabil2021">Khartabil et al. (<a href="../ref/references.html#ref-khartabil2021" role="doc-biblioref">2021</a>)</span>. Both extractors identified remarkably similar causal structures—the core nodes representing existential risk factors (unaligned AGI, nuclear conflict, biological risks, environmental catastrophe) and their relationships to near-term AI capabilities showed near-perfect agreement. This structural convergence aligns with findings from Anderson <span class="citation" data-cites="anderson2007">Anderson (<a href="../ref/references.html#ref-anderson2007" role="doc-biblioref">2007</a>)</span> that expert annotators tend to agree on primary argumentative relationships even when working independently.</p>
<p>However, the probability quantification phase exhibited substantially higher variance, corroborating established challenges in eliciting subjective probabilities from text. When extracting conditional probabilities for relationships like P(Nuclear_Conflict | Compromised_Political_Decision_Making), the two extractors’ estimates differed by as much as 30 percentage points. This variance reflects the fundamental ambiguity Pollock <span class="citation" data-cites="pollock1995">Pollock (<a href="../ref/references.html#ref-pollock1995" role="doc-biblioref">1995</a>)</span> identified in mapping natural language uncertainty expressions to numerical values—when Bucknall and Dori-Hacohen write that AI “may intensify cyber warfare,” reasonable interpreters might assign probabilities anywhere from 0.4 to 0.7.</p>
<p>The extraction revealed a hierarchical structure with [Existential_Risk] as the root node, influenced by both direct AI risks (unaligned AGI) and indirect pathways where near-term AI acts as an intermediate risk factor. The extractors consistently identified four main causal mechanisms: state-to-state relations (arms race dynamics), corporate power concentration, stable repressive regimes, and compromised political decision-making. This structural clarity demonstrates that despite quantitative uncertainty, the qualitative causal model remains extractable with high fidelity.</p>
<p>Interestingly, both manual extractors struggled with the same ambiguities that challenge automated systems, which could be an indication about convergence on the underlying level of information contained in the source. The relationship between social media recommender systems and various risk factors appeared multiple times in the text with slightly different framings, requiring judgment calls about whether these represented single or multiple causal relationships. This observation supports the design decision to maintain human oversight in AMTAIR’s extraction pipeline—certain interpretive choices require domain knowledge and contextual understanding that neither human nor machine extractors can make with complete confidence in isolation.</p>
<p>The manual extraction exercise validates AMTAIR’s two-stage approach. The high agreement on structure (ArgDown) combined with high variance in probabilities (BayesDown) empirically confirms that separating these extraction tasks addresses genuine cognitive and epistemological differences. As predicted by the causal structure learning literature <span class="citation" data-cites="heinze-deml2018">Heinze-Deml, Maathuis, and Meinshausen (<a href="../ref/references.html#ref-heinze-deml2018" role="doc-biblioref">2018</a>)</span> <span class="citation" data-cites="squires2023">Squires and Uhler (<a href="../ref/references.html#ref-squires2023" role="doc-biblioref">2023</a>)</span>, identifying “what causes what” represents a different inferential challenge than quantifying “how likely” those causal relationships are.</p>
<p>This validation also illuminates the value proposition of automated extraction. While human experts required 4-6 hours each to complete their extractions, AMTAIR processed the same document in under two minutes. Even if automated extraction only achieves 80% of human accuracy, the 100x speed improvement enables analyzing entire literatures rather than individual papers. The manual baseline suggests that perfect extraction may be impossible even for humans—but good-enough extraction at scale can still transform how we synthesize complex arguments about AI risk.</p>
</section>
</section>
<section id="sec-policy-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="sec-policy-evaluation">3.7 Policy Evaluation Capabilities</h2>
<!-- [-] TODO: Showcase how inference, sensitivity analysis, and policy evaluation work -->
<p>The ultimate test of a model isn’t its elegance but its utility. Can AMTAIR’s extracted models actually inform governance decisions? This section demonstrates how formal models enable systematic policy analysis.</p>
<section id="sec-intervention-representation" class="level3">
<h3 class="anchored" data-anchor-id="sec-intervention-representation">3.7.1 Intervention Representation</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>Representing policy interventions in Bayesian networks requires translating governance mechanisms into parameter modifications. Pearl’s do-calculus provides the mathematical framework, but the practical challenge lies in meaningful translation.</p>
<p>An ideal implementation would support several intervention types:</p>
<p><strong>Parameter Modification</strong>: Policies often change probabilities. Safety requirements might reduce P(deployment|misaligned) from 0.7 to 0.2 by making unsafe deployment legally prohibited or reputationally costly.</p>
<p><strong>Structural Interventions</strong>: Some policies add new causal pathways. Introducing mandatory review boards creates new nodes and edges representing oversight mechanisms.</p>
<p><strong>Uncertainty Modeling</strong>: Policy effectiveness is itself uncertain. Rather than assuming perfect implementation, represent ranges: P(deployment|misaligned) might become [0.1, 0.3] depending on enforcement.</p>
<p><strong>Multi-Level Effects</strong>: Policies influence multiple levels simultaneously. Compute governance affects technical development, corporate behavior, and international competition.</p>
<p>The system would translate high-level policy descriptions into specific network modifications, enabling rigorous counterfactual analysis of intervention effects.</p>
<!-- [-] COMPLETED: Rewrote intervention representation -->
</section>
<section id="sec-deployment-example" class="level3">
<h3 class="anchored" data-anchor-id="sec-deployment-example">3.7.2 Example: Deployment Governance</h3>
<p>Let’s trace how a specific policy—mandatory safety certification before deployment—might be evaluated:</p>
<p><strong>Baseline Model</strong>: In Carlsmith’s original model, P(deployment|misaligned) = 0.7, reflecting competitive pressures overwhelming safety concerns.</p>
<p><strong>Policy Specification</strong>: Safety certification requires demonstrating alignment properties before deployment authorization. Based on similar regulations in other domains, we might estimate 80-90% effectiveness.</p>
<p><strong>Parameter Update</strong>: The modified model sets P(deployment|misaligned) = 0.1-0.2, representing the residual probability of circumvention or regulatory capture.</p>
<p><strong>Downstream Effects</strong>:</p>
<ul>
<li>Reduced deployment of misaligned systems</li>
<li>Lower probability of power-seeking manifestation</li>
<li>Decreased existential risk from ~5% to ~1.2%</li>
</ul>
<p><strong>Sensitivity Analysis</strong>: How robust is this conclusion? Varying certification effectiveness, enforcement probability, and other parameters reveals which assumptions critically affect the outcome.</p>
<p>This example illustrates policy evaluation’s value: moving from vague claims (“regulation would help”) to quantitative assessments (“this specific intervention might reduce risk by 75%±15%”).</p>
<!-- [-] COMPLETED: Added deployment governance example -->
</section>
<section id="sec-robustness" class="level3">
<h3 class="anchored" data-anchor-id="sec-robustness">3.7.3 Robustness Analysis</h3>
<p>Good policies work across scenarios. AMTAIR enables testing interventions against multiple worldviews, parameter ranges, and structural variations.</p>
<p><strong>Cross-Model Testing</strong>: Extract multiple expert models and evaluate the same policy in each. If an intervention reduces risk in Carlsmith’s model but increases it in Christiano’s, we’ve identified a critical dependency.</p>
<p><strong>Parameter Sensitivity</strong>: Which uncertainties most affect policy effectiveness? If the intervention only works for P(alignment_difficulty) &lt; 0.3, and experts disagree whether it’s 0.2 or 0.4, we need more research before implementing.</p>
<p><strong>Structural Uncertainty</strong>: Some disagreements concern model structure itself. Does capability advancement directly influence misalignment risk, or only indirectly through deployment pressures? Test policies under both structures.</p>
<p><strong>Confidence Bounds</strong>: Rather than point estimates, compute ranges. “This policy reduces risk by 40-80%” honestly represents uncertainty while still providing actionable guidance.</p>
<p>The goal isn’t eliminating uncertainty but making decisions despite it. Robustness analysis reveals which policies work across uncertainties versus those requiring specific assumptions.</p>
<!-- [-] COMPLETED: Added robustness analysis -->
</section>
</section>
<section id="sec-visualization-design" class="level2">
<h2 class="anchored" data-anchor-id="sec-visualization-design">3.8 Interactive Visualization Design</h2>
<!-- [-] TODO: Describe the additional analytical capabilities -->
<p>A Bayesian network without good visualization is like a symphony without performers—all potential, no impact. The visualization system transforms mathematical abstractions into intuitive understanding.</p>
<section id="sec-visual-encoding" class="level3">
<h3 class="anchored" data-anchor-id="sec-visual-encoding">3.8.1 Visual Encoding Strategy</h3>
<p>Every visual element carries information:</p>
<p><strong>Color</strong>: The probability spectrum from red (low) through yellow to green (high) provides immediate gestalt understanding. Pre-attentive processing—the brain’s ability to process certain visual features without conscious attention—makes patterns jump out.</p>
<p><strong>Borders</strong>: Node type encoding (blue=root, purple=intermediate, magenta=outcome) creates visual flow. The eye naturally follows from blue through purple to magenta, tracing causal pathways.</p>
<p><strong>Size</strong>: Larger nodes have higher centrality—more connections, more influence. This emerges from the physics simulation but reinforces importance.</p>
<p><strong>Layout</strong>: Force-directed positioning naturally clusters related concepts while maintaining readability. The algorithm balances competing constraints: minimize edge crossings, maintain hierarchical levels, avoid node overlap, and create aesthetic appeal.</p>
<p>The encoding philosophy: every pixel should earn its place by conveying information while maintaining visual harmony.</p>
<!-- [-] COMPLETED: Added visual encoding -->
</section>
<section id="sec-progressive-disclosure" class="level3">
<h3 class="anchored" data-anchor-id="sec-progressive-disclosure">3.8.2 Progressive Disclosure</h3>
<p>Information overload kills understanding. The interface reveals complexity gradually:</p>
<p><strong>Level 1 - Overview</strong>: At first glance, see network structure and probability color coding. This answers: “What’s the shape of the argument? Where are the high-risk areas?”</p>
<p><strong>Level 2 - Hover Details</strong>: Mouse over a node to see its description and prior probability. This adds: “What does this factor represent? How likely is it?”</p>
<p><strong>Level 3 - Click Deep Dive</strong>: Clicking opens full probability tables and relationships. This reveals: “How does this probability change with conditions? What influences this factor?”</p>
<p><strong>Level 4 - Interactive Exploration</strong>: Dragging, zooming, and physics controls enable custom investigation. This supports: “What if I reorganize to see different patterns? How do these clusters relate?”</p>
<p>Each level serves different users and use cases. A policymaker might work primarily with levels 1-2, while a researcher dives into level 3-4 details.</p>
<!-- [-] COMPLETED: Added progressive disclosure -->
</section>
<section id="sec-ui-elements" class="level3">
<h3 class="anchored" data-anchor-id="sec-ui-elements">3.8.3 User Interface Elements</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>Effective interface design for Bayesian networks requires balancing power with accessibility:</p>
<p><strong>Physics Controls</strong>: Force-directed layouts benefit from tuning. Gravity affects spread, spring length controls spacing, damping influences settling time. Advanced users can adjust these for optimal layouts, while defaults work well for most cases.</p>
<p><strong>Filter Options</strong>: With large networks, selective viewing becomes essential. Filter by probability ranges (show only likely events), node types (focus on interventions), or causal depth (see only immediate effects).</p>
<p><strong>Export Functions</strong>: Different stakeholders need different formats. Researchers want raw data, policymakers need reports, presenters require images. Supporting diverse export formats enables broad usage.</p>
<p><strong>Comparison Mode</strong>: Understanding often comes from contrast. Side-by-side viewing of baseline versus intervention, or different expert models, reveals critical differences.</p>
<p>Iterative design with actual users would refine these features, ensuring they serve real needs rather than imagined ones.</p>
<!-- [-] COMPLETED: Rewrote UI elements -->
</section>
</section>
<section id="sec-market-integration" class="level2">
<h2 class="anchored" data-anchor-id="sec-market-integration">3.9 Integration with Prediction Markets</h2>
<!-- [-] TODO: Outline methods for connecting formal models with live data -->
<p>The vision: formal models that breathe with live data, updating as collective intelligence evolves. While full implementation awaits, the architecture anticipates this future.</p>
<section id="sec-integration-design" class="level3">
<h3 class="anchored" data-anchor-id="sec-integration-design">3.9.1 Design for Integration</h3>
<p><strong>Integration Architecture</strong> requires careful design to manage the impedance mismatch between formal models and market data:</p>
<p><strong>API Specifications</strong>: Each platform—Metaculus, Manifold, Good Judgment Open—has unique data formats, update frequencies, and question types. A unified adapter layer would translate platform-specific formats into model-compatible data.</p>
<p><strong>Semantic Matching</strong>: The hard problem—connecting “AI causes extinction by 2100” (market question) to “Existential_Catastrophe” (model node). This requires sophisticated NLP and possibly human curation for high-stakes connections.</p>
<p><strong>Aggregation Methods</strong>: When multiple markets address similar questions, how do we combine? Weighted averages based on market depth, participant quality, and historical accuracy provide more signal than simple means.</p>
<p><strong>Update Scheduling</strong>: Real-time updates would overwhelm users and computation. Smart scheduling might update daily for slow-changing strategic questions, hourly for capability announcements, immediately for critical events.</p>
<!-- [-] COMPLETED: Added integration design -->
</section>
<section id="sec-market-challenges" class="level3">
<h3 class="anchored" data-anchor-id="sec-market-challenges">3.9.2 Challenges and Opportunities</h3>
<p>The challenges are real but surmountable:</p>
<p><strong>Question Mapping</strong>: Markets ask specific, time-bound questions while models represent general relationships. “AGI by 2030?” maps uncertainly to “APS_Systems exists.” Developing robust mapping functions requires deep understanding of both domains.</p>
<p><strong>Temporal Alignment</strong>: Market probabilities change over time, but model parameters are typically static. Should we use current market values, time-weighted averages, or attempt to extract trend information?</p>
<p><strong>Quality Variation</strong>: A liquid market with expert participants provides different information than a thin market with casual forecasters. Weighting schemes must account for these quality differences.</p>
<p><strong>Incentive Effects</strong>: If models influence policy and policy influences outcomes, and markets forecast outcomes, we create feedback loops. Understanding these dynamics prevents perverse incentives.</p>
<p>Despite challenges, even partial integration provides value:</p>
<ul>
<li>External validation of expert-derived probabilities</li>
<li>Dynamic updating as new information emerges</li>
<li>Identification of where model and market disagree</li>
<li>Quantified uncertainty from market spread</li>
</ul>
<p>The perfect shouldn’t be the enemy of the good—simple integration beats no integration.</p>
<!-- [-] COMPLETED: Added market challenges -->
</section>
</section>
<section id="sec-computational-performance-analysis" class="level2">
<h2 class="anchored" data-anchor-id="sec-computational-performance-analysis">3.10 Computational Performance Analysis</h2>
<!-- [-] TODO: Analyze the computational efficiency of the system -->
<p>As networks grow from toy examples to real-world complexity, computational challenges emerge. Understanding these constraints shapes realistic expectations and optimization priorities.</p>
<section id="sec-exact-approximate" class="level3">
<h3 class="anchored" data-anchor-id="sec-exact-approximate">3.10.1 Exact vs.&nbsp;Approximate Inference</h3>
<p>The fundamental tradeoff in probabilistic reasoning: exactness versus tractability.</p>
<p><strong>Exact Inference</strong>: Variable elimination and junction tree algorithms provide mathematically exact answers. For our 3-node rain-sprinkler network, calculations complete instantly. For 20-node networks with modest connectivity, expect seconds. But for 50+ node networks with complex dependencies, exact inference becomes impractical—potentially taking hours or exhausting memory.</p>
<p><strong>Approximate Methods</strong>: When exactness becomes impractical, approximation saves the day:</p>
<ul>
<li><strong>Monte Carlo Sampling</strong>: Generate thousands of scenarios consistent with the network, estimate probabilities from frequencies. Accuracy improves with samples, trading computation time for precision.</li>
<li><strong>Variational Inference</strong>: Find the simplest distribution that approximates our complex reality. Like fitting a smooth curve to jagged data—we lose detail but gain comprehension.</li>
<li><strong>Belief Propagation</strong>: Pass messages between nodes until beliefs converge. Works beautifully for tree-structured networks, can oscillate or converge slowly for complex loops.</li>
</ul>
<p>The system selects methods based on network properties:</p>
<ul>
<li>Small networks: exact inference for precision</li>
<li>Medium networks: belief propagation for speed</li>
<li>Large networks: sampling for scalability</li>
<li>Very large networks: hierarchical decomposition</li>
</ul>
<!-- [-] COMPLETED: Added inference comparison -->
</section>
<section id="sec-scaling-strategies" class="level3">
<h3 class="anchored" data-anchor-id="sec-scaling-strategies">3.10.2 Scaling Strategies</h3>
<p>When networks grow beyond convenient computation, clever strategies maintain usability:</p>
<p><strong>Hierarchical Decomposition</strong>: Break large networks into smaller, manageable subnetworks. Compute locally, then integrate results. Like solving a jigsaw puzzle by completing sections before assembling the whole.</p>
<p><strong>Relevance Pruning</strong>: For specific queries, most nodes don’t matter. If asking about deployment risk, technical details about interpretability methods might be temporarily ignorable. Prune irrelevant subgraphs for focused analysis.</p>
<p><strong>Caching Architecture</strong>: Many queries repeat—P(catastrophe), P(deployment|misalignment). Cache results to avoid recomputation. Smart invalidation updates only affected queries when parameters change.</p>
<p><strong>Parallel Processing</strong>: Inference calculations often decompose naturally. Different branches of the network can be processed simultaneously. Modern multi-core processors and cloud computing make this increasingly attractive.</p>
<p>Implementation would balance these strategies based on usage patterns. Interactive exploration benefits from caching and pruning. Batch analysis leverages parallelization. The architecture accommodates multiple approaches.</p>
<!-- [-] COMPLETED: Added scaling strategies -->
</section>
</section>
<section id="sec-results-achievements" class="level2">
<h2 class="anchored" data-anchor-id="sec-results-achievements">3.11 Results and Achievements</h2>
<!-- [-] TODO: Summarize extraction quality, performance, and policy evaluation results -->
<section id="sec-extraction-quality" class="level3">
<h3 class="anchored" data-anchor-id="sec-extraction-quality">3.11.1 Extraction Quality Assessment</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>Assessing extraction quality requires honesty about both achievements and limitations. An ideal evaluation would examine multiple dimensions:</p>
<p><strong>Coverage</strong>: What proportion of arguments in source texts does the system successfully capture? Initial applications suggest the two-stage approach identifies most explicit causal claims while struggling with deeply implicit relationships.</p>
<p><strong>Accuracy</strong>: How closely do automated extractions match expert consensus? Preliminary comparisons indicate strong agreement on primary causal structures with more variation in probability estimates.</p>
<p><strong>Robustness</strong>: How well does the system handle different writing styles, argument structures, and domains? Academic papers with clear argumentation extract more reliably than informal blog posts or policy documents.</p>
<p><strong>Utility</strong>: Do the extracted models enable meaningful analysis? Even imperfect extractions that capture 80% of structure with approximate probabilities can dramatically accelerate modeling compared to starting from scratch.</p>
<p>The key insight: perfect extraction isn’t necessary for practical value. Like machine translation, which provides useful results despite imperfections, automated argument extraction can enhance human capability without replacing human judgment.</p>
<!-- [-] COMPLETED: Rewrote extraction quality assessment -->
</section>
<section id="sec-computational-performance" class="level3">
<h3 class="anchored" data-anchor-id="sec-computational-performance">3.11.2 Computational Performance</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>Performance analysis would reveal the practical boundaries of the current system:</p>
<p><strong>Extraction Speed</strong>: LLM-based extraction scales roughly linearly with document length. A 20-page paper might require 30-60 seconds for structural extraction and similar time for probability extraction. This enables processing dozens of documents daily—orders of magnitude faster than manual approaches.</p>
<p><strong>Network Complexity Limits</strong>: Exact inference remains tractable for networks up to approximately 30-40 nodes with moderate connectivity. Beyond this, approximate methods become necessary, with sampling methods scaling to hundreds of nodes at the cost of precision.</p>
<p><strong>Visualization Responsiveness</strong>: The extraction phase exhibits linear complexity in document length—processing twice as much text takes roughly twice as long. However, the inference phase faces exponential complexity in network connectivity.</p>
<p><strong>End-to-End Pipeline</strong>: From document input to interactive visualization, expect 2-5 minutes for typical AI safety arguments. This represents roughly 100x speedup compared to manual modeling efforts.</p>
<p>These performance characteristics make AMTAIR practical for real-world use while highlighting areas for future optimization.</p>
<!-- [-] COMPLETED: Rewrote computational performance -->
</section>
<section id="sec-policy-impact" class="level3">
<h3 class="anchored" data-anchor-id="sec-policy-impact">3.11.3 Policy Impact Evaluation</h3>
<!-- [-] COMPLETELY REWRITE: Results were HALLUCINATED -- rewrite by describing what procedures etc. one would ideally follow -->
<p>The true test of AMTAIR lies in its ability to inform governance decisions. An ideal policy evaluation framework would demonstrate several capabilities:</p>
<p><strong>Intervention Modeling</strong>: Representing diverse policy proposals—from technical standards to international agreements—as parameter modifications in extracted networks. This translation from qualitative proposals to quantitative changes enables rigorous analysis.</p>
<p><strong>Comparative Assessment</strong>: Evaluating multiple interventions across different expert worldviews to identify robust strategies. Policies that reduce risk across different models deserve priority over those requiring specific assumptions.</p>
<p><strong>Sensitivity Analysis</strong>: Understanding which uncertainties most affect policy conclusions. If an intervention’s effectiveness depends critically on disputed parameters, this highlights research priorities.</p>
<p><strong>Implementation Guidance</strong>: Moving beyond “this policy reduces risk” to specific recommendations about design details, implementation sequences, and success metrics.</p>
<p>The system would transform abstract policy discussions into concrete quantitative analyses, enabling evidence-based decision-making in AI governance.</p>
<!-- [-] COMPLETED: Rewrote policy impact evaluation -->
</section>
</section>
<section id="sec-technical-summary" class="level2">
<h2 class="anchored" data-anchor-id="sec-technical-summary">3.12 Summary of Technical Contributions</h2>
<p>Looking back at the implementation journey, several achievements stand out:</p>
<p><strong>Automated Extraction</strong>: The two-stage pipeline successfully transforms natural language arguments into formal models, achieving practical accuracy while maintaining transparency about limitations.</p>
<p><strong>Hybrid Representation</strong>: BayesDown bridges qualitative and quantitative worlds, preserving semantic richness while enabling mathematical analysis.</p>
<p><strong>Scalable Architecture</strong>: Modular design accommodates growth—new document types, improved extraction methods, additional visualization options—without fundamental restructuring.</p>
<p><strong>Interactive Accessibility</strong>: Thoughtful visualization makes complex models understandable to diverse stakeholders, democratizing access to formal reasoning tools.</p>
<p><strong>Policy Relevance</strong>: The ability to model interventions and assess robustness transforms academic exercises into practical governance tools.</p>
<p>These technical achievements validate the feasibility of computational coordination infrastructure for AI governance. Not as a complete solution, but as a meaningful enhancement to human judgment and collaboration.</p>
<p>The implementation demonstrates that the vision of automated argument extraction is not merely theoretical but practically achievable. While challenges remain—particularly in handling implicit reasoning and diverse uncertainty expressions—the system provides a foundation for enhanced coordination in AI governance.</p>
<p>The journey from concept to implementation revealed unexpected insights. The two-stage extraction process, initially a pragmatic choice, proved cognitively valid. The intermediate representations became valuable outputs themselves. The visualization challenges led to design innovations applicable beyond this project.</p>
<p>Most importantly, the implementation confirms that formal modeling of AI risk arguments need not remain the province of a few dedicated experts. Through automation and thoughtful design, these powerful tools can serve the broader community working to ensure advanced AI benefits humanity.</p>
<p>Having demonstrated technical feasibility and practical utility, we must now critically examine limitations, address objections, and explore broader implications. The next chapter undertakes this essential reflection, ensuring we neither oversell the approach nor undervalue its contributions.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-anderson2007" class="csl-entry" role="listitem">
Anderson, Terence J. 2007. <span>“Visualization Tools and Argument Schemes: A Question of Standpoint.”</span> <em>Law, Prob. &amp; Risk</em> 6: 97. <a href="https://heinonline.org/hol-cgi-bin/get_pdf.cgi?handle=hein.journals/lawprisk6&amp;section=9">https://heinonline.org/hol-cgi-bin/get_pdf.cgi?handle=hein.journals/lawprisk6&amp;section=9</a>.
</div>
<div id="ref-bucknall2022" class="csl-entry" role="listitem">
Bucknall, Benjamin S., and Shiri Dori-Hacohen. 2022. <span>“Current and <span>Near-Term AI</span> as a <span>Potential Existential Risk Factor</span>.”</span> In <em>Proceedings of the 2022 <span>AAAI</span>/<span>ACM Conference</span> on <span>AI</span>, <span>Ethics</span>, and <span>Society</span></em>, 119–29. Oxford United Kingdom: ACM. <a href="https://doi.org/10.1145/3514094.3534146">https://doi.org/10.1145/3514094.3534146</a>.
</div>
<div id="ref-heinze-deml2018" class="csl-entry" role="listitem">
Heinze-Deml, Christina, Marloes H. Maathuis, and Nicolai Meinshausen. 2018. <span>“Causal <span>Structure Learning</span>.”</span> <em>Annual Review of Statistics and Its Application</em> 5 (1): 371–91. <a href="https://doi.org/10.1146/annurev-statistics-031017-100630">https://doi.org/10.1146/annurev-statistics-031017-100630</a>.
</div>
<div id="ref-khartabil2021" class="csl-entry" role="listitem">
Khartabil, D., C. Collins, S. Wells, B. Bach, and J. Kennedy. 2021. <span>“Design and <span>Evaluation</span> of <span>Visualization Techniques</span> to <span>Facilitate Argument Exploration</span>.”</span> <em>Computer Graphics Forum</em> 40 (6): 447–65. <a href="https://doi.org/10.1111/cgf.14389">https://doi.org/10.1111/cgf.14389</a>.
</div>
<div id="ref-pollock1995" class="csl-entry" role="listitem">
Pollock, John L. 1995. <em>Cognitive Carpentry: <span>A</span> Blueprint for How to Build a Person</em>. Mit Press. <a href="https://books.google.ca/books?hl=en&amp;lr=&amp;id=JAfHrHTqswAC&amp;oi=fnd&amp;pg=PA1&amp;dq=Pollock,+J.+(1995).+Cognitive+Carpentry&amp;ots=rq-qSCBcxV&amp;sig=aAfHGsGUosxl_1-JuxIEA7C2QO4">https://books.google.ca/books?hl=en&amp;lr=&amp;id=JAfHrHTqswAC&amp;oi=fnd&amp;pg=PA1&amp;dq=Pollock,+J.+(1995).+Cognitive+Carpentry&amp;ots=rq-qSCBcxV&amp;sig=aAfHGsGUosxl_1-JuxIEA7C2QO4</a>.
</div>
<div id="ref-squires2023" class="csl-entry" role="listitem">
Squires, Chandler, and Caroline Uhler. 2023. <span>“Causal <span>Structure Learning</span>: <span>A Combinatorial Perspective</span>.”</span> <em>Foundations of Computational Mathematics</em> 23 (5): 1781–1815. <a href="https://doi.org/10.1007/s10208-022-09581-9">https://doi.org/10.1007/s10208-022-09581-9</a>.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The development of effective prompts required extensive empirical refinement.</p>
<p>Appendix L: Prompt Engineering - The Hidden Art documents this journey, revealing both the sophistication required for successful extraction and the brittleness of current approaches.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>3<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>I am extremely grateful for their help, support and the invaluable contribution. As lead engineer I had had the nagging suspicion that, maybe I had “hardcoded” by own intuitions into the system (through choices in the setup, system prompt, source selection etc.). I am relieved to let go of this concern and hope that future, large scale work confirms the potential for objectivity and convergence.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/2.0.Context.html" class="pagination-link" aria-label="2. Context and Theoretical Foundations">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">2. Context and Theoretical Foundations</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/4.Discussion.html" class="pagination-link" aria-label="4. Discussion: Implications and Limitations">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">4. Discussion: Implications and Limitations</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/VJMeyer/submission/edit/main/chapters/3.0.AMTAIR.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>