## Extrapolate .ipynb improvements / ideal notebook implementation (for outline / thesis)

### 1. Notebook must keep working -- Main tasks

<!-- [ ] add labels for each code cell: #| label: my_code_cell_test -->
 
<!-- [x] Test if alt text, caption etc. need to be added to code cells as well-- not easy, probably ignore -->

<!-- [ ] Create section with overview of code-labels -->



<!-- [ ]  prevent “code-line overflow” -->



<!-- [ ] save .html graph output properly (for thesis html integration AND as PDF image for latex) -->


<!-- [ ] check ideas from 'Code_Improvement_Plan' -->


### Pre-Repo Publication


<!-- [ ]  Update file links e.g. where data is fetched from-->

<!-- [ ] Redo Carlsmith data extraction - done but can be redone/improved with Opus4 -->


### Structure Updates


<!-- [ ] Does it make sense to introudce a new 'extensions' section? (does it improve clarity?) -->

<!-- [ ] investigate if splitting up and using .py functions works (and makes sense) -->


<!-- [ ] Review best practices from: “Automated Python-LaTeX Documentation Generation”:  https://github.com/pederw455/python-latex-repo/tree/main -->

<!-- [ ] How to make the "API call Section" less annoying? -->










<!-- [ ] Simply pay for (or use free Gemini) API and test API calls (?) ... only if time permits -->



<!-- [ ] Task_Syntax -->


## .Qmd Embed Python Syntax



```{python}
#| label: my_code_cell_test
#| fig-cap: "AMTAIR extraction pipeline visualization"
#| fig-link: "https://colab.research.google.com/drive/your-notebook-id"
#| fig-alt: "Detailed description for accessibility"

#| label: install_import_libraries
#| fig-cap: "Install & Import Libraries & Packages (One-Time Setup)"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=9pMZsRONBdOO&line=7&uniqifier=1"
#| fig-alt: "Install & Import Libraries & Packages (One-Time Setup)"

#| label: online_model
#| fig-cap: "MTAIR Online Model (Analytica)"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=m7l8xNd-gxcl&line=6&uniqifier=1"
#| fig-alt: "MTAIR Online Model (Analytica)"

# @title 1.1.a) --- MTAIR Online Model (Analytica) --- [online_model]

# @title 0.1 --- Install & Import Libraries & Packages (One-Time Setup) --- [install_import_libraries]


#| label: connect_to_github_repository
#| fig-cap: "Connect to GitHub Repository --- Load Files"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=CF3vBHahKWf1&line=6&uniqifier=1"
#| fig-alt: "Connect to GitHub Repository --- Load Files"

# @title 0.2 --- Connect to GitHub Repository --- Load Files [connect_to_github_repository]


#| label: prompt_template_function
#| fig-cap: "Prompt Template Function Definitions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=MJpgdepF2Ug3&line=5&uniqifier=1"
#| fig-alt: "Prompt Template Function Definitions"

# @title 1.2.0 --- Prompt Template Function Definitions --- [prompt_template_function]

#| label: provider_agnostic-interface
#| fig-cap: "Provider-Agnostic LLM API Interface"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=T87yG6SH2-4J&line=8&uniqifier=1"
#| fig-alt: "Provider-Agnostic LLM API Interface"

# @title 1.3.0 --- Provider-Agnostic LLM API Interface --- [provider_agnostic-interface]

#| label: api_call_function_definitions
#| fig-cap: "API Call Function Definitions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=LkZDjGLJ183D&line=8&uniqifier=1"
#| fig-alt: "API Call Function Definitions"

# @title 1.3.0 --- API Call Function Definitions --- [api_call_function_definitions]

#| label: prepare_api_call
#| fig-cap: "Prepare LLM API Call"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=aKselXiIqeIH&line=8&uniqifier=1"
#| fig-alt: "Prepare LLM API Call"

# @title 1.3 --- Prepare LLM API Call --- [prepare_api_call]

#| label: extraction_api_call
#| fig-cap: "Make ArgDown Extraction LLM API Call"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=aKselXiIqeIH&line=8&uniqifier=1"
#| fig-alt: "Make ArgDown Extraction LLM API Call"

# @title 1.4 --- Make ArgDown Extraction LLM API Call --- [extraction_api_call]

#| label: save_extraction_response
#| fig-cap: "Save ArgDown Extraction Response"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=-BiLLNymAz3c&line=8&uniqifier=1"
#| fig-alt: "Save ArgDown Extraction Response"

# @title 1.5 --- Save ArgDown Extraction Response --- [save_extraction_response]

#| label: argdown_online_sandbox
#| fig-cap: "ArgDown Online Sandbox"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=7_jAnBjf4e4P&line=8&uniqifier=1"
#| fig-alt: "ArgDown Online Sandbox"

# @title 1.6.2 --- ArgDown Online Sandbox --- [argdown_online_sandbox]

#| label: parsing_argdown_bayesdown
#| fig-cap: "Parsing ArgDown & BayesDown"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=LTDQOBd7COIm&line=8&uniqifier=1"
#| fig-alt: "Parsing ArgDown & BayesDown"

# @title 1.7 --- Parsing ArgDown & BayesDown (.md to .csv) --- [parsing_argdown_bayesdown]

#| label: example_use_case
#| fig-cap: "example use case"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=ibjjJ34v3sQn&line=4&uniqifier=1"
#| fig-alt: "example use case"

# example use case:

#| label: probability_extraction_questions_generation
#| fig-cap: "Probability Extraction Questions Generation"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=iVh-85KaYlyk&line=8&uniqifier=1"
#| fig-alt: "Probability Extraction Questions Generation"

# @title 2.1 --- Probability Extraction Questions Generation --- [probability_extraction_questions_generation]

#| label: bayesdown_questions_generation
#| fig-cap: "BayesDown Questions Generation"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=NqUj94g8gn4p&line=8&uniqifier=1"
#| fig-alt: "BayesDown Questions Generation"

# @title 2.2 --- BayesDown Questions Generation --- [bayesdown_questions_generation]

#| label: data_post_processing_functions
#| fig-cap: "Data Post-Processing Functions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=BBHfjdbVrTN1&line=8&uniqifier=1"
#| fig-alt: "Data Post-Processing Functions"

# @title 3.3.1 Data Post-Processing Functions --- [data_post_processing_functions]

#| label: enhance_extracted_data_with_network_metrics
#| fig-cap: "Enhance Extracted Data with Network Metrics"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=-0BjD1J1dahj&line=8&uniqifier=1"
#| fig-alt: "Enhance Extracted Data with Network Metrics"

# @title 3.3 --- Enhance Extracted Data with Network Metrics --- [enhance_extracted_data_with_network_metrics]

#| label: save_extracted_data_for_further_processing
#| fig-cap: "Save Extracted Data for Further Processing"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=5rJEacladahj&line=8&uniqifier=1"
#| fig-alt: "Save Extracted Data for Further Processing"

# @title 3.4 --- Save Extracted Data for Further Processing --- [save_extracted_data_for_further_processing]

#| label: bayesian_network_visualization_functions
#| fig-cap: "Bayesian Network Visualization Functions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=7ydIAKN4gJIb&line=8&uniqifier=1"
#| fig-alt: "Bayesian Network Visualization Functions"

# @title 4.0 --- Bayesian Network Visualization Functions --- [bayesian_network_visualization_functions]

#| label: node_classification_and_styling_functions
#| fig-cap: "Node Classification and Styling Functions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=RnRRLVq05yhr&line=8&uniqifier=1"
#| fig-alt: "Node Classification and Styling Functions"

# @title 4.1 --- Node Classification and Styling Functions --- [node_classification_and_styling_functions]

#| label: html_content_generation_functions
#| fig-cap: "HTML Content Generation Functions"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=ShVDxse152gY&line=8&uniqifier=1"
#| fig-alt: "HTML Content Generation Functions"

# @title 4.2 --- HTML Content Generation Functions --- [html_content_generation_functions]

#| label: save_visualization_and_notebook_outputs_as_html
#| fig-cap: "Save Visualization and Notebook Outputs as .HTML"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=HZXrWJrzO7d-&line=5&uniqifier=1"
#| fig-alt: "Save Visualization and Notebook Outputs as .HTML"

# @title 6.0 --- Save Visualization and Notebook Outputs as .HTML--- [save_visualization_and_notebook_outputs_as_html]

#| label: convert_notebook_to_markdown
#| fig-cap: "Convert .ipynb Notebook to MarkDown"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=-5AfIsfEJ5rM&line=8&uniqifier=1"
#| fig-alt: "Convert .ipynb Notebook to MarkDown"

# @title --- Convert .ipynb Notebook to MarkDown --- [convert_notebook_to_markdown]

#| label: convert_notebook_to_markdown_documentation
#| fig-cap: "Convert Notebook to Markdown Documentation"
#| fig-link: "https://colab.research.google.com/github/VJMeyer/submission/blob/main/AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#scrollTo=3j7R61pKM4WN&line=8&uniqifier=1"
#| fig-alt: "Convert Notebook to Markdown Documentation"

# @title 6.1 --- Convert Notebook to Markdown Documentation --- [convert_notebook_to_markdown_documentation]



import pandas as pd
print("AMTAIR is working!")
```



## Reference or Embed Code from .ipynb files

#### Code chunks from .ipynb notebooks can be embedded in the .qmd text with:

``` markdown
{{< embed /AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#my_code_cell_test >}}
```

#### which produces the output of executing the code cell:

{{< embed /AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#my_code_cell_test >}}

#### including 'echo=true' renders the code of the cell:

``` markdown
{{< embed /AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#my_code_cell_test echo=true >}}
```

{{< embed /AMTAIR_Prototype/data/example_carlsmith/AMTAIR_Prototype_example_carlsmith.ipynb#my_code_cell_test echo=true >}}

Link:

Full Notebooks are embedded in the Appendix through the \_quarto.yml file with:

